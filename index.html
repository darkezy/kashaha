<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ÙˆØ²Ù†Ø© Ù…ØµØ§Ø±ÙŠÙ - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø±Ø©</title>
    
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- html2canvas library for screenshot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Chart.js library for dashboard charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #fafbfc;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --accent-color: #495057;
            --accent-light: #6c757d;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --neutral-color: #6c757d;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 2px 8px rgba(0, 0, 0, 0.1);
            --spacing-xs: 5px;
            --spacing-sm: 10px;
            --spacing-md: 15px;
            --spacing-lg: 20px;
            --spacing-xl: 30px;
        }

        [data-theme="dark"] {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --border-color: #30363d;
            --accent-color: #58a6ff;
            --accent-light: #79c0ff;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            --shadow-hover: 0 2px 8px rgba(0, 0, 0, 0.6);
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            padding: var(--spacing-lg);
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.6;
        }

        .table-wrapper {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-bottom: var(--spacing-lg);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-secondary);
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: background 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .header {
            background: var(--bg-secondary);
            color: var(--text-primary);
            padding: var(--spacing-xl);
            text-align: center;
            position: relative;
            border-bottom: 2px solid var(--border-color);
        }

        .theme-toggle {
            position: absolute;
            left: var(--spacing-xl);
            top: var(--spacing-xl);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-primary);
            font-family: 'Cairo', sans-serif;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .theme-toggle:hover {
            background: var(--bg-primary);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: var(--spacing-sm);
            font-weight: 700;
            color: var(--text-primary);
        }

        .header p {
            font-size: 1em;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .tabs {
            display: flex;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .tab {
            flex: 1;
            padding: var(--spacing-md) var(--spacing-lg);
            text-align: center;
            cursor: pointer;
            background: transparent;
            border: none;
            font-size: 1em;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s;
            font-family: 'Cairo', sans-serif;
            border-bottom: 2px solid transparent;
        }

        .tab:hover {
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .tab.active {
            background: var(--bg-secondary);
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
            font-weight: 600;
        }

        .tab-content {
            display: none;
            padding: var(--spacing-xl);
        }

        .tab-content.active {
            display: block;
        }

        .section {
            margin-bottom: var(--spacing-xl);
            background: var(--bg-tertiary);
            padding: var(--spacing-lg);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.4em;
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--border-color);
            font-weight: 600;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-secondary);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: none;
            border: 1px solid var(--border-color);
            margin-bottom: var(--spacing-md);
        }

        th, td {
            padding: var(--spacing-md) var(--spacing-sm);
            text-align: right;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        th {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: var(--spacing-md);
        }

        .category-row {
            background: var(--bg-tertiary);
            font-weight: 600;
            color: var(--text-primary);
        }

        .category-row td {
            padding: var(--spacing-md);
        }

        .subtotal-row {
            background: #fffbf0;
            font-weight: 600;
            color: var(--text-primary);
        }

        .subtotal-row td {
            padding: var(--spacing-md);
        }

        [data-theme="dark"] .subtotal-row {
            background: #2d2a1f;
        }

        .total-row {
            background: #f0f9f4;
            font-weight: 600;
            font-size: 1em;
            color: var(--success-color);
        }

        .total-row td {
            padding: var(--spacing-md);
        }

        [data-theme="dark"] .total-row {
            background: #1a2e1f;
        }

        .grand-total-row {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-weight: 700;
            font-size: 1.1em;
            border-top: 2px solid var(--border-color);
        }

        .grand-total-row td {
            padding: var(--spacing-lg) var(--spacing-md);
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.95em;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-family: 'Cairo', sans-serif;
            transition: all 0.2s ease;
            min-height: 38px;
        }

        input[type="number"] {
            max-width: 150px;
            text-align: center;
            font-weight: 600;
        }

        input[type="number"]:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(73, 80, 87, 0.1);
        }

        [data-theme="dark"] input[type="number"]:focus, 
        [data-theme="dark"] input[type="text"]:focus {
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.2);
        }

        .btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            font-family: 'Cairo', sans-serif;
            font-size: 0.9em;
            white-space: nowrap;
        }

        .btn-add {
            background: var(--success-color);
            color: white;
            margin: var(--spacing-xs);
            border-color: var(--success-color);
        }

        .btn-add:hover {
            background: #218838;
            border-color: #218838;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);
        }

        .btn-remove {
            background: var(--danger-color);
            color: white;
            border-color: var(--danger-color);
        }

        .btn-remove:hover {
            background: #c82333;
            border-color: #c82333;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
        }

        .btn-export {
            background: var(--accent-color);
            color: white;
            padding: var(--spacing-md) var(--spacing-xl);
            font-size: 1em;
            margin: var(--spacing-lg) auto;
            display: block;
            border-color: var(--accent-color);
        }

        .btn-export:hover:not(:disabled) {
            background: var(--text-primary);
            border-color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .btn-export:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status-indicator {
            text-align: center;
            padding: var(--spacing-xl);
            border-radius: 6px;
            margin: var(--spacing-lg) 0;
            font-size: 1.2em;
            font-weight: 600;
            box-shadow: none;
            transition: all 0.3s ease;
            border: 2px solid var(--border-color);
            line-height: 1.8;
        }

        .status-excellent {
            background: #d4edda;
            color: #155724;
            border-color: #28a745;
        }

        [data-theme="dark"] .status-excellent {
            background: #1a2e1f;
            color: #4ade80;
        }

        .status-good {
            background: #e8f5e9;
            color: #2e7d32;
            border-color: #4caf50;
        }

        [data-theme="dark"] .status-good {
            background: #1c2e21;
            color: #86efac;
        }

        .status-balanced {
            background: #e9ecef;
            color: #495057;
            border-color: #6c757d;
        }

        [data-theme="dark"] .status-balanced {
            background: #21262d;
            color: #8b949e;
        }

        .status-bad {
            background: #fff3cd;
            color: #856404;
            border-color: #ffc107;
        }

        [data-theme="dark"] .status-bad {
            background: #2d2a1a;
            color: #fbbf24;
        }

        .status-critical {
            background: #f8d7da;
            color: #721c24;
            border-color: #dc3545;
        }

        [data-theme="dark"] .status-critical {
            background: #2e1a1d;
            color: #f87171;
        }

        .analysis-table {
            margin-top: var(--spacing-xl);
        }

        .positive {
            color: var(--success-color);
            font-weight: 700;
        }

        .negative {
            color: var(--danger-color);
            font-weight: 700;
        }

        .neutral {
            color: var(--neutral-color);
            font-weight: 700;
        }

        /* Loading overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            background: var(--bg-secondary);
            padding: var(--spacing-xl) calc(var(--spacing-xl) * 2);
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            max-width: 90%;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid var(--border-color);
            border-top: 6px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--spacing-lg);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--text-primary);
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .loading-subtext {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .tabs, .btn, .header, .theme-toggle {
                display: none;
            }
            .container {
                box-shadow: none;
                border: none;
            }
            .tab-content {
                display: block !important;
                padding: var(--spacing-lg);
            }
            table {
                page-break-inside: avoid;
            }
        }

        @media (min-width: 1400px) {
            :root {
                --spacing-xs: 6px;
                --spacing-sm: 12px;
                --spacing-md: 18px;
                --spacing-lg: 24px;
                --spacing-xl: 36px;
            }
            input[type="number"] {
                max-width: 180px;
            }
            .container {
                max-width: 1600px;
            }
        }

        @media (max-width: 1024px) {
            :root {
                --spacing-xs: 5px;
                --spacing-sm: 10px;
                --spacing-md: 15px;
                --spacing-lg: 20px;
                --spacing-xl: 28px;
            }
            body {
                padding: var(--spacing-md);
            }
            .header h1 {
                font-size: 2em;
            }
            input[type="number"] {
                max-width: 140px;
            }
        }

        @media (max-width: 768px) {
            :root {
                --spacing-xs: 4px;
                --spacing-sm: 8px;
                --spacing-md: 12px;
                --spacing-lg: 16px;
                --spacing-xl: 24px;
            }
            body {
                padding: var(--spacing-sm);
            }
            .container {
                border-radius: 6px;
            }
            .header {
                padding: var(--spacing-lg) var(--spacing-md);
            }
            .header h1 {
                font-size: 1.8em;
                margin-bottom: var(--spacing-xs);
            }
            .header p {
                font-size: 0.95em;
            }
            .theme-toggle {
                position: static;
                display: block;
                margin: 0 auto var(--spacing-md);
                font-size: 0.85em;
                padding: var(--spacing-sm) var(--spacing-md);
            }
            .tabs {
                flex-direction: column;
            }
            .tab {
                padding: var(--spacing-md) var(--spacing-lg);
                font-size: 0.95em;
            }
            .tab-content {
                padding: var(--spacing-lg) var(--spacing-md);
            }
            .section {
                padding: var(--spacing-md);
                margin-bottom: var(--spacing-lg);
            }
            .section-title {
                font-size: 1.25em;
                margin-bottom: var(--spacing-sm);
            }
            table {
                font-size: 0.9em;
                min-width: 600px;
            }
            th, td {
                padding: var(--spacing-sm);
            }
            input[type="text"] {
                padding: var(--spacing-sm);
                font-size: 0.9em;
                min-height: 36px;
            }
            input[type="number"] {
                padding: var(--spacing-sm);
                font-size: 0.9em;
                min-height: 36px;
                max-width: 120px;
            }
            .btn {
                padding: var(--spacing-sm) var(--spacing-md);
                font-size: 0.85em;
            }
            .btn-export {
                padding: var(--spacing-md) var(--spacing-lg);
                font-size: 0.95em;
                width: 100%;
            }
            .status-indicator {
                padding: var(--spacing-lg) var(--spacing-md);
                font-size: 1.1em;
            }
            .table-wrapper {
                margin: 0 calc(var(--spacing-md) * -1);
            }
        }

        @media (max-width: 640px) {
            :root {
                --spacing-xs: 3px;
                --spacing-sm: 6px;
                --spacing-md: 10px;
                --spacing-lg: 14px;
                --spacing-xl: 20px;
            }
            .header h1 {
                font-size: 1.6em;
            }
            .header p {
                font-size: 0.9em;
            }
            .section-title {
                font-size: 1.15em;
            }
            table {
                font-size: 0.85em;
                min-width: 550px;
            }
            input[type="number"] {
                max-width: 110px;
            }
        }

        @media (max-width: 480px) {
            :root {
                --spacing-xs: 3px;
                --spacing-sm: 5px;
                --spacing-md: 8px;
                --spacing-lg: 12px;
                --spacing-xl: 16px;
            }
            body {
                padding: var(--spacing-xs);
            }
            .container {
                border-radius: 0;
                border-left: none;
                border-right: none;
            }
            .header {
                padding: var(--spacing-md) var(--spacing-sm);
            }
            .header h1 {
                font-size: 1.4em;
            }
            .header p {
                font-size: 0.85em;
            }
            .theme-toggle {
                padding: var(--spacing-sm) var(--spacing-md);
                font-size: 0.8em;
                margin-bottom: var(--spacing-sm);
            }
            .tab {
                padding: var(--spacing-sm) var(--spacing-md);
                font-size: 0.9em;
            }
            .tab-content {
                padding: var(--spacing-md) var(--spacing-sm);
            }
            .section {
                padding: var(--spacing-sm);
                margin-bottom: var(--spacing-md);
            }
            .section-title {
                font-size: 1.05em;
                padding-bottom: var(--spacing-xs);
                margin-bottom: var(--spacing-sm);
            }
            table {
                font-size: 0.8em;
                min-width: 500px;
            }
            th {
                font-size: 0.75em;
                padding: var(--spacing-sm);
            }
            th, td {
                padding: var(--spacing-xs) var(--spacing-xs);
            }
            input[type="text"] {
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: 0.85em;
                min-height: 32px;
            }
            input[type="number"] {
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: 0.85em;
                min-height: 32px;
                max-width: 100px;
            }
            .btn {
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: 0.8em;
            }
            .btn-add {
                margin: var(--spacing-xs);
            }
            .btn-export {
                padding: var(--spacing-sm) var(--spacing-md);
                font-size: 0.9em;
            }
            .status-indicator {
                padding: var(--spacing-md) var(--spacing-sm);
                font-size: 1em;
            }
            #status-score {
                font-size: 1.6em !important;
                margin-top: var(--spacing-xs) !important;
            }
            .category-row td {
                padding: var(--spacing-sm);
                font-size: 0.9em;
            }
            .subtotal-row td, .total-row td, .grand-total-row td {
                padding: var(--spacing-sm);
            }
            .table-wrapper {
                margin: 0 calc(var(--spacing-sm) * -1);
            }
        }

        @media (max-width: 360px) {
            .header h1 {
                font-size: 1.2em;
            }
            .header p {
                font-size: 0.8em;
            }
            .tab {
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: 0.85em;
            }
            .section-title {
                font-size: 1em;
            }
            table {
                font-size: 0.75em;
                min-width: 450px;
            }
            th, td {
                padding: var(--spacing-xs);
            }
            input[type="text"] {
                padding: var(--spacing-xs);
                font-size: 0.8em;
                min-height: 30px;
            }
            input[type="number"] {
                padding: var(--spacing-xs);
                font-size: 0.8em;
                min-height: 30px;
                max-width: 90px;
            }
            .btn {
                padding: var(--spacing-xs);
                font-size: 0.75em;
            }
            .status-indicator {
                font-size: 0.95em;
            }
        }

        @media (max-width: 768px) {
            .category-row td:first-child {
                position: sticky;
                right: 0;
                background: var(--bg-tertiary);
                z-index: 1;
            }
            .table-wrapper {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
        }

    </style>
</head>
<body>
    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Ø¬Ø§Ø±Ù Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©...</div>
            <div class="loading-subtext">Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ù‡Ø°Ø§ Ø¨Ø¶Ø¹ Ø«ÙˆØ§Ù†Ù</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
            <h1>ğŸ’° ÙˆØ²Ù†Ø© Ù…ØµØ§Ø±ÙŠÙ</h1>
            <p>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø±Ø©</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard')">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
            <button class="tab" onclick="switchTab('income')">Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¯Ø®Ù„</button>
            <button class="tab" onclick="switchTab('expenses')">Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø±Ø©</button>
            <button class="tab" onclick="switchTab('analysis')">ØªØ­Ù„ÙŠÙ„ Ù…ÙˆÙ‚Ù Ø§Ù„Ø£Ø³Ø±Ø©</button>
            <button class="tab" onclick="switchTab('budget')">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø®Ø·Ø·Ø©</button>
            <button class="tab" onclick="switchTab('assets')">Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ…</button>
            <button class="tab" onclick="switchTab('receivables')">Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ø¯Ø§Ø¦Ù†Ø©</button>
            <button class="tab" onclick="switchTab('inventory')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
            <button class="tab" onclick="switchTab('cashflow')">Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©</button>
            <button class="tab" onclick="switchTab('tax')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©</button>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Dashboard -->
        <div id="dashboard" class="tab-content active">
            <h2 class="section-title">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª - Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø©</h2>
            
            <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: var(--spacing-lg); border-radius: 12px; color: white; text-align: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’° Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
                    <div style="font-size: 2.2em; font-weight: 700;" id="dash-income">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Ø³Ù†ÙˆÙŠØ§Ù‹: <span id="dash-income-yearly">0</span></div>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: var(--spacing-lg); border-radius: 12px; color: white; text-align: center; box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’³ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</div>
                    <div style="font-size: 2.2em; font-weight: 700;" id="dash-expenses">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Ø³Ù†ÙˆÙŠØ§Ù‹: <span id="dash-expenses-yearly">0</span></div>
                </div>
                <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: var(--spacing-lg); border-radius: 12px; color: white; text-align: center; box-shadow: 0 4px 15px rgba(17, 153, 142, 0.3);">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’ Ø§Ù„ÙØ§Ø¦Ø¶ Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
                    <div style="font-size: 2.2em; font-weight: 700;" id="dash-surplus">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Ø§Ù„Ù†Ø³Ø¨Ø©: <span id="dash-surplus-ratio">0%</span></div>
                </div>
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: var(--spacing-lg); border-radius: 12px; color: white; text-align: center; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ¦ ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</div>
                    <div style="font-size: 2.2em; font-weight: 700;" id="dash-networth">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Ø§Ù„Ø£ØµÙˆÙ„ - Ø§Ù„Ø®ØµÙˆÙ…</div>
                </div>
            </div>

            <!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: var(--spacing-xl); margin-bottom: var(--spacing-xl);">
                
                <!-- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: Ø§Ù„Ø¯Ø®Ù„ vs Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ -->
                <div style="background: var(--bg-secondary); padding: var(--spacing-lg); border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--shadow);">
                    <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.2em; text-align: center;">ğŸ“Š Ø§Ù„Ø¯Ø®Ù„ Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h3>
                    <canvas id="incomeExpensesChart" style="max-height: 300px;"></canvas>
                </div>

                <!-- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ -->
                <div style="background: var(--bg-secondary); padding: var(--spacing-lg); border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--shadow);">
                    <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.2em; text-align: center;">ğŸ¥§ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h3>
                    <canvas id="expensesDistributionChart" style="max-height: 300px;"></canvas>
                </div>

            </div>

            <!-- ØµÙ Ø«Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: var(--spacing-xl); margin-bottom: var(--spacing-xl);">
                
                <!-- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¯Ø®Ù„ -->
                <div style="background: var(--bg-secondary); padding: var(--spacing-lg); border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--shadow);">
                    <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.2em; text-align: center;">ğŸ’° Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¯Ø®Ù„</h3>
                    <canvas id="incomeSourcesChart" style="max-height: 300px;"></canvas>
                </div>

                <!-- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ… -->
                <div style="background: var(--bg-secondary); padding: var(--spacing-lg); border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--shadow);">
                    <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.2em; text-align: center;">ğŸ¦ Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ…</h3>
                    <canvas id="assetsLiabilitiesChart" style="max-height: 300px;"></canvas>
                </div>

            </div>

            <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 12px; margin-bottom: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“ˆ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs)</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 8px; border: 1px solid var(--border-color); text-align: center;">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 8px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø¯Ø®Ø§Ø±</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--success-color);" id="kpi-savings-rate">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ù…Ù† Ø§Ù„Ø¯Ø®Ù„</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 8px; border: 1px solid var(--border-color); text-align: center;">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 8px;">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ©</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--warning-color);" id="kpi-fixed-expenses">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ù…Ù† Ø§Ù„Ø¯Ø®Ù„</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 8px; border: 1px solid var(--border-color); text-align: center;">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 8px;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø³ÙŠÙˆÙ„Ø©</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--accent-color);" id="kpi-liquidity-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø³Ø§Ø¦Ù„Ø©</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 8px; border: 1px solid var(--border-color); text-align: center;">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 8px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§ÙƒØªÙØ§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--success-color);" id="kpi-financial-independence">0</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ù‡Ø±</div>
                    </div>
                </div>
            </div>

            <!-- Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹ -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 12px; margin-bottom: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">âš¡ Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹</h3>
                <div id="dashboard-summary" style="line-height: 2; color: var(--text-primary);"></div>
            </div>

            <!-- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØªÙˆØµÙŠØ§Øª -->
            <div id="dashboard-alerts" style="margin-bottom: var(--spacing-xl);"></div>

            <button class="btn btn-export" onclick="exportToPDF('dashboard')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
        </div>

        <!-- Ù‚Ø³Ù… Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¯Ø®Ù„ -->
        <div id="income" class="tab-content">
            <h2 class="section-title">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ø±Ø©</h2>
            
            <table id="incomeTable">
                <thead>
                    <tr>
                        <th style="width: 8%">Ù…</th>
                        <th style="width: 25%">Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®Ù„</th>
                        <th style="width: 35%">Ù…ØµØ¯Ø± Ø§Ù„Ø¯Ø®Ù„</th>
                        <th style="width: 22%">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø±ÙŠ</th>
                        <th style="width: 10%">Ø¥Ø¬Ø±Ø§Ø¡</th>
                    </tr>
                </thead>
                <tbody id="incomeBody">
                    <!-- Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ø¨Ø¯Ù„Ø§Øª -->
                    <tr class="category-row">
                        <td>1</td>
                        <td colspan="5"><strong>Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ø¨Ø¯Ù„Ø§Øª</strong></td>
                    </tr>
                    <tr data-category="salaries">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…ØµØ¯Ø± Ø§Ù„Ø¯Ø®Ù„"></td>
                        <td><input type="number" class="income-amount" data-category="salaries" value="0" onchange="calculateIncome()"></td>
                        <td><button class="btn btn-remove" onclick="removeIncomeRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addIncomeRow('salaries')">+ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ¯Ø±</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="salaries-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø¥Ø¹Ø§Ù†Ø§Øª -->
                    <tr class="category-row">
                        <td>2</td>
                        <td colspan="5"><strong>Ø§Ù„Ø¥Ø¹Ø§Ù†Ø§Øª</strong></td>
                    </tr>
                    <tr data-category="allowances">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…ØµØ¯Ø± Ø§Ù„Ø¯Ø®Ù„"></td>
                        <td><input type="number" class="income-amount" data-category="allowances" value="0" onchange="calculateIncome()"></td>
                        <td><button class="btn btn-remove" onclick="removeIncomeRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addIncomeRow('allowances')">+ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ¯Ø±</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="allowances-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª -->
                    <tr class="category-row">
                        <td>3</td>
                        <td colspan="5"><strong>Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª / Ù…Ø´Ø§Ø±ÙŠØ¹ / Ø£Ø¹Ù…Ø§Ù„ Ø¥Ø¶Ø§ÙÙŠØ©</strong></td>
                    </tr>
                    <tr data-category="investments">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…ØµØ¯Ø± Ø§Ù„Ø¯Ø®Ù„"></td>
                        <td><input type="number" class="income-amount" data-category="investments" value="0" onchange="calculateIncome()"></td>
                        <td><button class="btn btn-remove" onclick="removeIncomeRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addIncomeRow('investments')">+ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ¯Ø±</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="investments-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø£Ø®Ø±Ù‰ -->
                    <tr class="category-row">
                        <td>4</td>
                        <td colspan="5"><strong>Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø£Ø®Ø±Ù‰</strong></td>
                    </tr>
                    <tr data-category="others">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…ØµØ¯Ø± Ø§Ù„Ø¯Ø®Ù„"></td>
                        <td><input type="number" class="income-amount" data-category="others" value="0" onchange="calculateIncome()"></td>
                        <td><button class="btn btn-remove" onclick="removeIncomeRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addIncomeRow('others')">+ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ¯Ø±</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="others-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ -->
                    <tr class="total-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¯Ø®Ù„ Ø´Ù‡Ø±ÙŠØ§Ù‹</strong></td>
                        <td><strong id="monthly-income">0</strong></td>
                        <td></td>
                    </tr>
                    <tr class="grand-total-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¯Ø®Ù„ Ø³Ù†ÙˆÙŠØ§Ù‹</strong></td>
                        <td><strong id="yearly-income">0</strong></td>
                        <td></td>
                    </tr>
                    <tr class="total-row">
                        <td></td>
                        <td colspan="2"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ (Ù…Ù† Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ)</strong></td>
                        <td><strong id="total-expenses-display">0</strong></td>
                        <td></td>
                    </tr>
                    <tr class="grand-total-row">
                        <td></td>
                        <td colspan="2"><strong>ØµØ§ÙÙŠ Ø§Ù„ÙØ§Ø¦Ø¶</strong></td>
                        <td><strong id="net-surplus">0</strong></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

            <button class="btn btn-export" onclick="exportToPDF('income')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø®Ù„</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ -->
        <div id="expenses" class="tab-content">
            <h2 class="section-title">ğŸ’³ ØªØ­Ù„ÙŠÙ„ Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø£Ø³Ø±Ø©</h2>
            
            <table id="expensesTable">
                <thead>
                    <tr>
                        <th style="width: 8%">#</th>
                        <th style="width: 25%">Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙ</th>
                        <th style="width: 35%">Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ</th>
                        <th style="width: 22%">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø±ÙŠ</th>
                        <th style="width: 10%">Ø¥Ø¬Ø±Ø§Ø¡</th>
                    </tr>
                </thead>
                <tbody id="expensesBody">
                    <!-- Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª -->
                    <tr class="category-row">
                        <td>1</td>
                        <td colspan="5"><strong>Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª / Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†</strong></td>
                    </tr>
                    <tr data-category="transport">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="transport" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('transport')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="transport-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø¨ÙŠØª -->
                    <tr class="category-row">
                        <td>2</td>
                        <td colspan="5"><strong>Ø§Ù„Ø¨ÙŠØª / Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</strong></td>
                    </tr>
                    <tr data-category="housing">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="housing" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('housing')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="housing-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ù…Ù‚Ø§Ø¶ÙŠ -->
                    <tr class="category-row">
                        <td>3</td>
                        <td colspan="5"><strong>Ø§Ù„Ù…Ù‚Ø§Ø¶ÙŠ</strong></td>
                    </tr>
                    <tr data-category="groceries">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="groceries" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('groceries')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="groceries-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„ØµÙŠØ§Ù†Ø© -->
                    <tr class="category-row">
                        <td>4</td>
                        <td colspan="5"><strong>Ù…ØµØ§Ø±ÙŠÙ ØµÙŠØ§Ù†Ø© / Ø§Ø³ØªØ¨Ø¯Ø§Ù„</strong></td>
                    </tr>
                    <tr data-category="maintenance">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="maintenance" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('maintenance')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="maintenance-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„ØªØ±ÙÙŠÙ‡ -->
                    <tr class="category-row">
                        <td>5</td>
                        <td colspan="5"><strong>Ø§Ù„ØªØ±ÙÙŠÙ‡</strong></td>
                    </tr>
                    <tr data-category="entertainment">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="entertainment" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('entertainment')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="entertainment-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„ØµØ­Ø© -->
                    <tr class="category-row">
                        <td>6</td>
                        <td colspan="5"><strong>Ø§Ù„ØµØ­Ø©</strong></td>
                    </tr>
                    <tr data-category="health">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="health" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('health')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="health-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¹Ù„ÙŠÙ… -->
                    <tr class="category-row">
                        <td>7</td>
                        <td colspan="5"><strong>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</strong></td>
                    </tr>
                    <tr data-category="education">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="education" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('education')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="education-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„ØµØ¯Ù‚Ø§Øª -->
                    <tr class="category-row">
                        <td>8</td>
                        <td colspan="5"><strong>Ø§Ù„ØµØ¯Ù‚Ø§Øª / Ø§Ù„Ø²ÙƒØ§Ø© / Ø§Ù„Ù‡Ø¨Ø§Øª</strong></td>
                    </tr>
                    <tr data-category="charity">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="charity" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('charity')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="charity-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª -->
                    <tr class="category-row">
                        <td>9</td>
                        <td colspan="5"><strong>Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª / Ø§Ù„Ø¯ÙŠÙˆÙ†</strong></td>
                    </tr>
                    <tr data-category="debts">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="debts" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('debts')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="debts-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø§Ø¯Ø®Ø§Ø± -->
                    <tr class="category-row">
                        <td>10</td>
                        <td colspan="5"><strong>Ø§Ø¯Ø®Ø§Ø± / Ø·ÙˆØ§Ø±Ø¦</strong></td>
                    </tr>
                    <tr data-category="savings">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                        <td><input type="number" class="expense-amount" data-category="savings" value="0" onchange="calculateExpenses()"></td>
                        <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addExpenseRow('savings')">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="savings-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ -->
                    <tr class="total-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø´Ù‡Ø±ÙŠØ§Ù‹</strong></td>
                        <td><strong id="monthly-expenses">0</strong></td>
                        <td></td>
                    </tr>
                    <tr class="grand-total-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø³Ù†ÙˆÙŠØ§Ù‹</strong></td>
                        <td><strong id="yearly-expenses">0</strong></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

            <button class="btn btn-export" onclick="exportToPDF('expenses')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø®Ø·Ø·Ø© vs Ø§Ù„ÙØ¹Ù„ÙŠØ© -->
        <div id="budget" class="tab-content">
            <h2 class="section-title">ğŸ¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø®Ø·Ø·Ø© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„ÙØ¹Ù„ÙŠØ©</h2>
            
            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ“Š Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ù…Ø®Ø·Ø·</div>
                    <div style="font-size: 2em; font-weight: 700;" id="planned-income-total">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">âœ… Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ</div>
                    <div style="font-size: 2em; font-weight: 700;" id="actual-income-total">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ“Š Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø®Ø·Ø·Ø©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="planned-expenses-total">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">âœ… Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ÙØ¹Ù„ÙŠØ©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="actual-expenses-total">0</div>
                </div>
            </div>

            <table id="budgetTable">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 25%">Ø§Ù„Ø¨Ù†Ø¯</th>
                        <th style="width: 15%">Ø§Ù„Ù…Ø®Ø·Ø·</th>
                        <th style="width: 15%">Ø§Ù„ÙØ¹Ù„ÙŠ</th>
                        <th style="width: 15%">Ø§Ù„ÙØ±Ù‚</th>
                        <th style="width: 15%">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</th>
                        <th style="width: 10%">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody id="budgetBody">
                    <!-- ===== Ø§Ù„Ø¯Ø®Ù„ ===== -->
                    <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <td colspan="7" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’° Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Income)
                        </td>
                    </tr>

                    <tr data-category="income-salary">
                        <td>1</td>
                        <td>Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ø£Ø¬ÙˆØ±</td>
                        <td><input type="number" class="planned-income" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-income" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="income-business">
                        <td>2</td>
                        <td>Ø¯Ø®Ù„ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</td>
                        <td><input type="number" class="planned-income" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-income" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="income-investment">
                        <td>3</td>
                        <td>Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª</td>
                        <td><input type="number" class="planned-income" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-income" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="income-other">
                        <td>4</td>
                        <td>Ø¯Ø®Ù„ Ø¢Ø®Ø±</td>
                        <td><input type="number" class="planned-income" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-income" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr class="total-row">
                        <td></td>
                        <td><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„</strong></td>
                        <td><strong id="total-planned-income">0</strong></td>
                        <td><strong id="total-actual-income">0</strong></td>
                        <td><strong id="total-income-difference">0</strong></td>
                        <td><strong id="total-income-achievement">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- ÙØ§ØµÙ„ -->
                    <tr style="height: 20px; background: var(--bg-primary);"><td colspan="7"></td></tr>

                    <!-- ===== Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ===== -->
                    <tr style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                        <td colspan="7" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’³ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© (Expenses)
                        </td>
                    </tr>

                    <tr data-category="expense-housing">
                        <td>5</td>
                        <td>Ø§Ù„Ø³ÙƒÙ† (Ø¥ÙŠØ¬Ø§Ø± / Ù‚Ø³Ø·)</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-food">
                        <td>6</td>
                        <td>Ø§Ù„Ø·Ø¹Ø§Ù… ÙˆØ§Ù„Ù…Ù‚Ø§Ø¶ÙŠ</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-transport">
                        <td>7</td>
                        <td>Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª ÙˆØ§Ù„Ø¨Ù†Ø²ÙŠÙ†</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-utilities">
                        <td>8</td>
                        <td>Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-health">
                        <td>9</td>
                        <td>Ø§Ù„ØµØ­Ø© ÙˆØ§Ù„ØªØ£Ù…ÙŠÙ†</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-education">
                        <td>10</td>
                        <td>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-entertainment">
                        <td>11</td>
                        <td>Ø§Ù„ØªØ±ÙÙŠÙ‡ ÙˆØ§Ù„ØªØ³Ù„ÙŠØ©</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-savings">
                        <td>12</td>
                        <td>Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-debts">
                        <td>13</td>
                        <td>Ø³Ø¯Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙˆÙ† ÙˆØ§Ù„Ù‚Ø±ÙˆØ¶</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr data-category="expense-other">
                        <td>14</td>
                        <td>Ù…ØµØ§Ø±ÙŠÙ Ø£Ø®Ø±Ù‰</td>
                        <td><input type="number" class="planned-expense" value="0" onchange="calculateBudget()"></td>
                        <td><input type="number" class="actual-expense" value="0" onchange="calculateBudget()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td class="difference-cell">0</td>
                        <td class="achievement-cell">0%</td>
                        <td class="status-cell">-</td>
                    </tr>

                    <tr class="total-row">
                        <td></td>
                        <td><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</strong></td>
                        <td><strong id="total-planned-expenses">0</strong></td>
                        <td><strong id="total-actual-expenses">0</strong></td>
                        <td><strong id="total-expenses-difference">0</strong></td>
                        <td><strong id="total-expenses-achievement">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- ÙØ§ØµÙ„ -->
                    <tr style="height: 20px; background: var(--bg-primary);"><td colspan="7"></td></tr>

                    <!-- ===== ØµØ§ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ===== -->
                    <tr style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">
                        <td colspan="7" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’ ØµØ§ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (Net Budget)
                        </td>
                    </tr>

                    <tr class="grand-total-row" style="background: linear-gradient(135deg, rgba(79, 172, 254, 0.1) 0%, rgba(0, 242, 254, 0.1) 100%);">
                        <td></td>
                        <td><strong>Ø§Ù„ÙØ§Ø¦Ø¶ / Ø§Ù„Ø¹Ø¬Ø²</strong></td>
                        <td><strong id="net-planned-budget">0</strong></td>
                        <td><strong id="net-actual-budget">0</strong></td>
                        <td><strong id="net-budget-difference">0</strong></td>
                        <td><strong id="net-budget-achievement">0%</strong></td>
                        <td></td>
                    </tr>

                    <tr style="background: #e7f3ff; border: 2px solid #0d6efd;">
                        <td colspan="7" style="padding: var(--spacing-md); text-align: center; color: #0d6efd; font-weight: 600;">
                            ğŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙØ¹Ù„ÙŠØ© ÙŠØªÙ… Ø­Ø³Ø§Ø¨Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ù†Ø­Ø±Ø§ÙØ§Øª -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-top: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ù†Ø­Ø±Ø§ÙØ§Øª (Variance Analysis)</h3>
                <div id="variance-alerts"></div>
            </div>

            <button class="btn btn-export" onclick="exportToPDF('budget')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø®Ø·Ø·Ø©</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ… -->
        <div id="assets" class="tab-content">
            <h2 class="section-title">ğŸ¦ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠØ© - Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ…</h2>
            
            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆÙ„</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-assets-display">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-liabilities-display">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="net-worth-display">0</div>
                </div>
            </div>

            <table id="assetsTable">
                <thead>
                    <tr>
                        <th style="width: 8%">#</th>
                        <th style="width: 25%">Ø§Ù„ØªØµÙ†ÙŠÙ</th>
                        <th style="width: 35%">Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                        <th style="width: 22%">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</th>
                        <th style="width: 10%">Ø¥Ø¬Ø±Ø§Ø¡</th>
                    </tr>
                </thead>
                <tbody id="assetsBody">
                    <!-- ===== Ø§Ù„Ø£ØµÙˆÙ„ ===== -->
                    <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <td colspan="5" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’° Ø§Ù„Ø£ØµÙˆÙ„ (Assets)
                        </td>
                    </tr>

                    <!-- Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø© -->
                    <tr class="category-row">
                        <td>1</td>
                        <td colspan="5"><strong>Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø© (Current Assets)</strong></td>
                    </tr>
                    
                    <!-- Ø§Ù„Ù†Ù‚Ø¯ ÙˆØ§Ù„Ø¨Ù†ÙˆÙƒ -->
                    <tr style="background: rgba(102, 126, 234, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: var(--accent-color);">ğŸ’µ Ø§Ù„Ù†Ù‚Ø¯ ÙˆØ§Ù„Ø¨Ù†ÙˆÙƒ</td>
                    </tr>
                    <tr data-category="cash">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠØŒ Ù…Ø­ÙØ¸Ø© Ù†Ù‚Ø¯ÙŠØ©"></td>
                        <td><input type="number" class="asset-amount" data-category="cash" data-type="asset" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('cash')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„ -->
                    <tr style="background: rgba(102, 126, 234, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: var(--accent-color);">ğŸ“Š Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„</td>
                    </tr>
                    <tr data-category="short-investments">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ø³ØªØ«Ù…Ø§Ø±ØŒ Ø£Ø³Ù‡Ù…"></td>
                        <td><input type="number" class="asset-amount" data-category="short-investments" data-type="asset" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('short-investments')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø©</strong></td>
                        <td><strong id="current-assets-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ© -->
                    <tr class="category-row">
                        <td>2</td>
                        <td colspan="5"><strong>Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ© (Fixed Assets)</strong></td>
                    </tr>

                    <!-- Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª -->
                    <tr style="background: rgba(102, 126, 234, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: var(--accent-color);">ğŸ  Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</td>
                    </tr>
                    <tr data-category="real-estate">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ù…Ù†Ø²Ù„ØŒ Ø´Ù‚Ø©ØŒ Ø£Ø±Ø¶"></td>
                        <td><input type="number" class="asset-amount" data-category="real-estate" data-type="asset" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('real-estate')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø±ÙƒØ¨Ø§Øª -->
                    <tr style="background: rgba(102, 126, 234, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: var(--accent-color);">ğŸš— Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</td>
                    </tr>
                    <tr data-category="vehicles">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø³ÙŠØ§Ø±Ø©ØŒ Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©"></td>
                        <td><input type="number" class="asset-amount" data-category="vehicles" data-type="asset" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('vehicles')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ø§Ù„Ø£Ø«Ø§Ø« ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª -->
                    <tr style="background: rgba(102, 126, 234, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: var(--accent-color);">ğŸª‘ Ø£Ø«Ø§Ø« ÙˆÙ…Ø¹Ø¯Ø§Øª</td>
                    </tr>
                    <tr data-category="furniture">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø«Ø§Ø« Ù…Ù†Ø²Ù„ÙŠØŒ Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©"></td>
                        <td><input type="number" class="asset-amount" data-category="furniture" data-type="asset" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('furniture')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ©</strong></td>
                        <td><strong id="fixed-assets-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø£ØµÙˆÙ„ Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„ -->
                    <tr class="category-row">
                        <td>3</td>
                        <td colspan="5"><strong>Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„</strong></td>
                    </tr>
                    <tr data-category="long-investments">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©ØŒ Ø£Ø³Ù‡Ù… Ø·ÙˆÙŠÙ„Ø©"></td>
                        <td><input type="number" class="asset-amount" data-category="long-investments" data-type="asset" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('long-investments')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„</strong></td>
                        <td><strong id="long-investments-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆÙ„ -->
                    <tr class="total-row">
                        <td></td>
                        <td colspan="2"><strong>ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆÙ„ (Total Assets)</strong></td>
                        <td><strong id="total-assets">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- ÙØ§ØµÙ„ -->
                    <tr style="height: 30px; background: var(--bg-primary);"><td colspan="5"></td></tr>

                    <!-- ===== Ø§Ù„Ø®ØµÙˆÙ… ===== -->
                    <tr style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                        <td colspan="5" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’³ Ø§Ù„Ø®ØµÙˆÙ… ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª (Liabilities)
                        </td>
                    </tr>

                    <!-- Ø§Ù„Ø®ØµÙˆÙ… Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„ -->
                    <tr class="category-row">
                        <td>4</td>
                        <td colspan="5"><strong>Ø§Ù„Ø®ØµÙˆÙ… Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„ (Current Liabilities)</strong></td>
                    </tr>

                    <!-- Ø§Ù„Ù‚Ø±ÙˆØ¶ Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„ -->
                    <tr style="background: rgba(240, 147, 251, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: #f5576c;">ğŸ’³ Ù‚Ø±ÙˆØ¶ ÙˆØ¯ÙŠÙˆÙ† Ù‚ØµÙŠØ±Ø© (Ø£Ù‚Ù„ Ù…Ù† Ø³Ù†Ø©)</td>
                    </tr>
                    <tr data-category="short-debt">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ø±Ø¶ Ø´Ø®ØµÙŠØŒ Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†"></td>
                        <td><input type="number" class="asset-amount" data-category="short-debt" data-type="liability" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('short-debt')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- ÙÙˆØ§ØªÙŠØ± Ù…Ø³ØªØ­Ù‚Ø© -->
                    <tr style="background: rgba(240, 147, 251, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: #f5576c;">ğŸ“„ ÙÙˆØ§ØªÙŠØ± Ù…Ø³ØªØ­Ù‚Ø©</td>
                    </tr>
                    <tr data-category="bills">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: ÙÙˆØ§ØªÙŠØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ø¥ÙŠØ¬Ø§Ø± Ù…Ø³ØªØ­Ù‚"></td>
                        <td><input type="number" class="asset-amount" data-category="bills" data-type="liability" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('bills')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®ØµÙˆÙ… Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„</strong></td>
                        <td><strong id="current-liabilities-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø®ØµÙˆÙ… Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„ -->
                    <tr class="category-row">
                        <td>5</td>
                        <td colspan="5"><strong>Ø§Ù„Ø®ØµÙˆÙ… Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„ (Long-term Liabilities)</strong></td>
                    </tr>

                    <!-- Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„ -->
                    <tr style="background: rgba(240, 147, 251, 0.05);">
                        <td></td>
                        <td colspan="5" style="padding-right: 30px; font-weight: 600; color: #f5576c;">ğŸ¦ Ù‚Ø±ÙˆØ¶ Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„</td>
                    </tr>
                    <tr data-category="long-debt">
                        <td></td>
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ø±Ø¶ Ø¹Ù‚Ø§Ø±ÙŠØŒ Ù‚Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©"></td>
                        <td><input type="number" class="asset-amount" data-category="long-debt" data-type="liability" value="0" onchange="calculateAssets()"></td>
                        <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addAssetRow('long-debt')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td colspan="2"><strong>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®ØµÙˆÙ… Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„</strong></td>
                        <td><strong id="long-liabilities-total">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ… -->
                    <tr class="total-row">
                        <td></td>
                        <td colspan="2"><strong>ğŸ’³ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ… (Total Liabilities)</strong></td>
                        <td><strong id="total-liabilities">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- ÙØ§ØµÙ„ -->
                    <tr style="height: 30px; background: var(--bg-primary);"><td colspan="5"></td></tr>

                    <!-- ===== ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ© ===== -->
                    <tr style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">
                        <td colspan="5" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© (Equity)
                        </td>
                    </tr>

                    <!-- ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ© -->
                    <tr class="grand-total-row" style="background: linear-gradient(135deg, rgba(79, 172, 254, 0.1) 0%, rgba(0, 242, 254, 0.1) 100%);">
                        <td></td>
                        <td colspan="2"><strong>ğŸ’ ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ© = Ø§Ù„Ø£ØµÙˆÙ„ - Ø§Ù„Ø®ØµÙˆÙ…<br><small style="font-weight: 400; opacity: 0.8;">(Net Worth)</small></strong></td>
                        <td><strong id="net-worth" style="font-size: 1.3em;">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© -->
                    <tr style="background: #e7f3ff; border: 2px solid #0d6efd;">
                        <td></td>
                        <td colspan="4" style="padding: var(--spacing-md); text-align: center; color: #0d6efd; font-weight: 600;">
                            ğŸ“ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©: <strong>Ø§Ù„Ø£ØµÙˆÙ„ = Ø§Ù„Ø®ØµÙˆÙ… + Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</strong>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-top: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“Š Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø£ØµÙˆÙ„</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--accent-color);" id="debt-to-assets-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">ÙƒÙ„Ù…Ø§ Ù‚Ù„Øª ÙƒØ§Ù† Ø£ÙØ¶Ù„</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙ† Ø¥Ù„Ù‰ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--accent-color);" id="debt-to-equity-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ø£Ù‚Ù„ Ù…Ù† 100%</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);" id="equity-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">ÙƒÙ„Ù…Ø§ Ø²Ø§Ø¯Øª ÙƒØ§Ù† Ø£ÙØ¶Ù„</div>
                    </div>
                </div>
            </div>

            <button class="btn btn-export" onclick="exportToPDF('assets')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠØ©</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯Ø§Ø¦Ù†Ø© -->
        <div id="receivables" class="tab-content">
            <h2 class="section-title">ğŸ¤ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯Ø§Ø¦Ù†Ø©</h2>
            
            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’° Ù„Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-receivables-display">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Accounts Receivable</div>
                </div>
                <div style="background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’³ Ø¹Ù„ÙŠÙƒ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ†</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-payables-display">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Accounts Payable</div>
                </div>
                <div style="background: linear-gradient(135deg, #3f5efb 0%, #fc466b 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">âš–ï¸ ØµØ§ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ²</div>
                    <div style="font-size: 2em; font-weight: 700;" id="net-position-display">0</div>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">Net Position</div>
                </div>
            </div>

            <table id="receivablesTable">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 20%">Ø§Ù„Ø§Ø³Ù… / Ø§Ù„Ø¬Ù‡Ø©</th>
                        <th style="width: 18%">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ</th>
                        <th style="width: 18%">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>
                        <th style="width: 18%">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>
                        <th style="width: 13%">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</th>
                        <th style="width: 8%">Ø¥Ø¬Ø±Ø§Ø¡</th>
                    </tr>
                </thead>
                <tbody id="receivablesBody">
                    <!-- ===== Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ù„Ù†Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†) ===== -->
                    <tr style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white;">
                        <td colspan="7" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’° Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ù„Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† (Accounts Receivable)
                        </td>
                    </tr>

                    <!-- Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ø´Ø®ØµÙŠØ© -->
                    <tr class="category-row">
                        <td>1</td>
                        <td colspan="6"><strong>ğŸ’µ Ø¯ÙŠÙˆÙ† Ø´Ø®ØµÙŠØ© (Ù‚Ø±ÙˆØ¶ Ø£Ø¹Ø·ÙŠØªÙ‡Ø§)</strong></td>
                    </tr>
                    <tr data-category="personal-receivable">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ" class="debtor-name"></td>
                        <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="date" class="due-date"></td>
                        <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addReceivableRow('personal-receivable')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="4"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="personal-receivable-original">0</strong></td>
                        <td><strong id="personal-receivable-paid">0</strong></td>
                        <td><strong id="personal-receivable-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ù…Ø³ØªØ­Ù‚Ø§Øª Ø¹Ù…Ù„ -->
                    <tr class="category-row">
                        <td>2</td>
                        <td colspan="6"><strong>ğŸ’¼ Ù…Ø³ØªØ­Ù‚Ø§Øª Ø¹Ù…Ù„ / Ø®Ø¯Ù…Ø§Øª Ù‚Ø¯Ù…ØªÙ‡Ø§</strong></td>
                    </tr>
                    <tr data-category="work-receivable">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ / Ø§Ù„Ø´Ø±ÙƒØ©" class="debtor-name"></td>
                        <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="date" class="due-date"></td>
                        <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addReceivableRow('work-receivable')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="4"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="work-receivable-original">0</strong></td>
                        <td><strong id="work-receivable-paid">0</strong></td>
                        <td><strong id="work-receivable-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ù…Ø¨ÙŠØ¹Ø§Øª Ø¢Ø¬Ù„Ø© -->
                    <tr class="category-row">
                        <td>3</td>
                        <td colspan="6"><strong>ğŸ›’ Ù…Ø¨ÙŠØ¹Ø§Øª Ø¢Ø¬Ù„Ø© (Ø¯ÙØ¹ Ù„Ø§Ø­Ù‚)</strong></td>
                    </tr>
                    <tr data-category="sales-receivable">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±ÙŠ" class="debtor-name"></td>
                        <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="date" class="due-date"></td>
                        <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addReceivableRow('sales-receivable')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="4"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="sales-receivable-original">0</strong></td>
                        <td><strong id="sales-receivable-paid">0</strong></td>
                        <td><strong id="sales-receivable-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© -->
                    <tr class="total-row">
                        <td></td>
                        <td><strong>ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</strong></td>
                        <td><strong id="total-receivables-original">0</strong></td>
                        <td><strong id="total-receivables-paid">0</strong></td>
                        <td><strong id="total-receivables-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- ÙØ§ØµÙ„ -->
                    <tr style="height: 30px; background: var(--bg-primary);"><td colspan="7"></td></tr>

                    <!-- ===== Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© (Ø¹Ù„ÙŠÙ†Ø§ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ†) ===== -->
                    <tr style="background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); color: white;">
                        <td colspan="7" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’³ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© - Ø¹Ù„ÙŠÙƒ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ† (Accounts Payable)
                        </td>
                    </tr>

                    <!-- Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ø´Ø®ØµÙŠØ© -->
                    <tr class="category-row">
                        <td>4</td>
                        <td colspan="6"><strong>ğŸ’³ Ù‚Ø±ÙˆØ¶ Ø´Ø®ØµÙŠØ© (Ø§Ù‚ØªØ±Ø¶ØªÙ‡Ø§)</strong></td>
                    </tr>
                    <tr data-category="personal-payable">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø¶" class="creditor-name"></td>
                        <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="date" class="due-date"></td>
                        <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addReceivableRow('personal-payable')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="4"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="personal-payable-original">0</strong></td>
                        <td><strong id="personal-payable-paid">0</strong></td>
                        <td><strong id="personal-payable-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ù…Ø´ØªØ±ÙŠØ§Øª Ø¢Ø¬Ù„Ø© -->
                    <tr class="category-row">
                        <td>5</td>
                        <td colspan="6"><strong>ğŸ›ï¸ Ù…Ø´ØªØ±ÙŠØ§Øª Ø¢Ø¬Ù„Ø© (Ø¯ÙØ¹ Ù„Ø§Ø­Ù‚)</strong></td>
                    </tr>
                    <tr data-category="purchase-payable">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø¦Ø¹ / Ø§Ù„Ù…Ø­Ù„" class="creditor-name"></td>
                        <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="date" class="due-date"></td>
                        <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addReceivableRow('purchase-payable')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="4"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="purchase-payable-original">0</strong></td>
                        <td><strong id="purchase-payable-paid">0</strong></td>
                        <td><strong id="purchase-payable-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- ÙÙˆØ§ØªÙŠØ± Ù…Ø³ØªØ­Ù‚Ø© -->
                    <tr class="category-row">
                        <td>6</td>
                        <td colspan="6"><strong>ğŸ“„ ÙÙˆØ§ØªÙŠØ± ÙˆØ®Ø¯Ù…Ø§Øª Ù…Ø³ØªØ­Ù‚Ø©</strong></td>
                    </tr>
                    <tr data-category="bills-payable">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø© / Ù†ÙˆØ¹ Ø§Ù„ÙØ§ØªÙˆØ±Ø©" class="creditor-name"></td>
                        <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                        <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="date" class="due-date"></td>
                        <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addReceivableRow('bills-payable')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="4"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="bills-payable-original">0</strong></td>
                        <td><strong id="bills-payable-paid">0</strong></td>
                        <td><strong id="bills-payable-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© -->
                    <tr class="total-row">
                        <td></td>
                        <td><strong>ğŸ’³ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†Ø©</strong></td>
                        <td><strong id="total-payables-original">0</strong></td>
                        <td><strong id="total-payables-paid">0</strong></td>
                        <td><strong id="total-payables-remaining">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <!-- ÙØ§ØµÙ„ -->
                    <tr style="height: 30px; background: var(--bg-primary);"><td colspan="7"></td></tr>

                    <!-- ===== ØµØ§ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² ===== -->
                    <tr style="background: linear-gradient(135deg, #3f5efb 0%, #fc466b 100%); color: white;">
                        <td colspan="7" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            âš–ï¸ ØµØ§ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² (Net Position)
                        </td>
                    </tr>

                    <tr class="grand-total-row" style="background: linear-gradient(135deg, rgba(63, 94, 251, 0.1) 0%, rgba(252, 70, 107, 0.1) 100%);">
                        <td></td>
                        <td colspan="3"><strong>âš–ï¸ ØµØ§ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² = Ù„Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† - Ø¹Ù„ÙŠÙƒ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ†</strong></td>
                        <td><strong id="net-position" style="font-size: 1.3em;">0</strong></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr style="background: #e7f3ff; border: 2px solid #0d6efd;">
                        <td colspan="7" style="padding: var(--spacing-md); text-align: center; color: #0d6efd; font-weight: 600;">
                            ğŸ’¡ <strong>ØªÙØ³ÙŠØ±:</strong> Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… Ù…ÙˆØ¬Ø¨ (+) ÙÙ‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù† Ù„Ùƒ Ø£Ù…ÙˆØ§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø£ÙƒØ«Ø± Ù…Ù…Ø§ Ø¹Ù„ÙŠÙƒ. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø³Ø§Ù„Ø¨ (-) ÙÙ‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù† Ø¹Ù„ÙŠÙƒ Ø£Ù…ÙˆØ§Ù„ Ø£ÙƒØ«Ø± Ù…Ù…Ø§ Ù„Ùƒ.
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°Ù…Ù… -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-top: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°Ù…Ù… ÙˆØ§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§Øª</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ (Ù„Ùƒ)</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);" id="collection-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ù…Ø§ ØªÙ… ØªØ­ØµÙŠÙ„Ù‡</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø³Ø¯Ø§Ø¯ (Ø¹Ù„ÙŠÙƒ)</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--warning-color);" id="payment-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ù…Ø§ ØªÙ… Ø³Ø¯Ø§Ø¯Ù‡</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù…ØªÙˆØ³Ø· Ø­Ø¬Ù… Ø§Ù„Ø¯ÙŠÙ†</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--accent-color);" id="avg-debt-size">0</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ù„ÙƒÙ„ Ù…Ø¹Ø§Ù…Ù„Ø©</div>
                    </div>
                </div>
            </div>

            <!-- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ -->
            <div id="due-alerts" style="margin-top: var(--spacing-xl);"></div>

            <button class="btn btn-export" onclick="exportToPDF('receivables')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯Ø§Ø¦Ù†Ø©</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
        <div id="inventory" class="tab-content">
            <h2 class="section-title">ğŸ“¦ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
            
            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-inventory-value">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’° Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-expected-profit">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ“ˆ Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</div>
                    <div style="font-size: 2em; font-weight: 700;" id="profit-margin">0%</div>
                </div>
                <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ“¦ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙ†Ø§Ù</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-items-count">0</div>
                </div>
            </div>

            <table id="inventoryTable">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 20%">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                        <th style="width: 10%">Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                        <th style="width: 12%">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>
                        <th style="width: 12%">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
                        <th style="width: 12%">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>
                        <th style="width: 12%">Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</th>
                        <th style="width: 10%">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</th>
                        <th style="width: 7%">Ø¥Ø¬Ø±Ø§Ø¡</th>
                    </tr>
                </thead>
                <tbody id="inventoryBody">
                    <!-- Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© -->
                    <tr class="category-row">
                        <td>1</td>
                        <td colspan="8"><strong>ğŸ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</strong></td>
                    </tr>
                    <tr data-category="food">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></td>
                        <td><input type="number" class="inv-quantity" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-cost" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-price" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-stock-value" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="number" class="inv-profit" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="text" class="inv-margin" value="0%" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><button class="btn btn-remove" onclick="removeInventoryRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addInventoryRow('food')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="6"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="food-quantity">0</strong></td>
                        <td colspan="2"></td>
                        <td><strong id="food-stock-value">0</strong></td>
                        <td><strong id="food-profit">0</strong></td>
                        <td><strong id="food-margin">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ù…Ù„Ø§Ø¨Ø³ -->
                    <tr class="category-row">
                        <td>2</td>
                        <td colspan="8"><strong>ğŸ‘” Ù…Ù„Ø§Ø¨Ø³</strong></td>
                    </tr>
                    <tr data-category="clothing">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></td>
                        <td><input type="number" class="inv-quantity" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-cost" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-price" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-stock-value" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="number" class="inv-profit" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="text" class="inv-margin" value="0%" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><button class="btn btn-remove" onclick="removeInventoryRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addInventoryRow('clothing')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="6"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="clothing-quantity">0</strong></td>
                        <td colspan="2"></td>
                        <td><strong id="clothing-stock-value">0</strong></td>
                        <td><strong id="clothing-profit">0</strong></td>
                        <td><strong id="clothing-margin">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª -->
                    <tr class="category-row">
                        <td>3</td>
                        <td colspan="8"><strong>ğŸ’» Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</strong></td>
                    </tr>
                    <tr data-category="electronics">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></td>
                        <td><input type="number" class="inv-quantity" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-cost" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-price" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-stock-value" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="number" class="inv-profit" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="text" class="inv-margin" value="0%" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><button class="btn btn-remove" onclick="removeInventoryRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addInventoryRow('electronics')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="6"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="electronics-quantity">0</strong></td>
                        <td colspan="2"></td>
                        <td><strong id="electronics-stock-value">0</strong></td>
                        <td><strong id="electronics-profit">0</strong></td>
                        <td><strong id="electronics-margin">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ© -->
                    <tr class="category-row">
                        <td>4</td>
                        <td colspan="8"><strong>ğŸ  Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©</strong></td>
                    </tr>
                    <tr data-category="home">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></td>
                        <td><input type="number" class="inv-quantity" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-cost" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-price" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-stock-value" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="number" class="inv-profit" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="text" class="inv-margin" value="0%" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><button class="btn btn-remove" onclick="removeInventoryRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addInventoryRow('home')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="6"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="home-quantity">0</strong></td>
                        <td colspan="2"></td>
                        <td><strong id="home-stock-value">0</strong></td>
                        <td><strong id="home-profit">0</strong></td>
                        <td><strong id="home-margin">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰ -->
                    <tr class="category-row">
                        <td>5</td>
                        <td colspan="8"><strong>ğŸ“¦ Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰</strong></td>
                    </tr>
                    <tr data-category="other">
                        <td></td>
                        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></td>
                        <td><input type="number" class="inv-quantity" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-cost" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-price" value="0" onchange="calculateInventory()"></td>
                        <td><input type="number" class="inv-stock-value" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="number" class="inv-profit" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><input type="text" class="inv-margin" value="0%" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        <td><button class="btn btn-remove" onclick="removeInventoryRow(this)">Ø­Ø°Ù</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td><button class="btn btn-add" onclick="addInventoryRow('other')">+ Ø¥Ø¶Ø§ÙØ©</button></td>
                        <td colspan="6"></td>
                    </tr>
                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</strong></td>
                        <td><strong id="other-quantity">0</strong></td>
                        <td colspan="2"></td>
                        <td><strong id="other-stock-value">0</strong></td>
                        <td><strong id="other-profit">0</strong></td>
                        <td><strong id="other-margin">0%</strong></td>
                        <td></td>
                    </tr>

                    <!-- Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª -->
                    <tr class="total-row">
                        <td></td>
                        <td><strong>ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</strong></td>
                        <td><strong id="total-quantity">0</strong></td>
                        <td colspan="2"></td>
                        <td><strong id="total-stock-value">0</strong></td>
                        <td><strong id="total-profit">0</strong></td>
                        <td><strong id="total-margin">0%</strong></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

            <!-- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
            <div id="inventory-alerts" style="margin-top: var(--spacing-xl);"></div>

            <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-top: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--accent-color);" id="avg-cost">0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);" id="avg-price">0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ø£Ø¹Ù„Ù‰ Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);" id="highest-margin">0%</div>
                    </div>
                </div>
            </div>

            <button class="btn btn-export" onclick="exportToPDF('inventory')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© -->
        <div id="cashflow" class="tab-content">
            <h2 class="section-title">ğŸ’° Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©</h2>
            
            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’µ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„Ø©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-inflows">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’¸ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬Ø©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="total-outflows">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #3f5efb 0%, #fc466b 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’ ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ</div>
                    <div style="font-size: 2em; font-weight: 700;" id="net-cashflow">0</div>
                </div>
            </div>

            <table id="cashflowTable">
                <thead>
                    <tr>
                        <th style="width: 8%">#</th>
                        <th style="width: 40%">Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                        <th style="width: 26%">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                        <th style="width: 26%">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                    </tr>
                </thead>
                <tbody id="cashflowBody">
                    <!-- ===== Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© ===== -->
                    <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <td colspan="4" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ’¼ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© (Operating Activities)
                        </td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© -->
                    <tr style="background: rgba(17, 153, 142, 0.1);">
                        <td></td>
                        <td colspan="3" style="padding-right: 30px; font-weight: 600; color: #11998e;">ğŸ’µ ØªØ¯ÙÙ‚Ø§Øª Ø¯Ø§Ø®Ù„Ø©</td>
                    </tr>
                    <tr data-category="operating-in">
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø¨ÙŠØ¹Ø§Øª Ù†Ù‚Ø¯ÙŠØ©ØŒ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø®Ø¯Ù…Ø§Øª"></td>
                        <td><input type="number" class="cf-amount" data-type="inflow" data-activity="operating" value="0" onchange="calculateCashflow()"></td>
                        <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"><button class="btn btn-add" onclick="addCashflowRow('operating-in')">+ Ø¥Ø¶Ø§ÙØ© ØªØ¯ÙÙ‚ Ø¯Ø§Ø®Ù„</button></td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© -->
                    <tr style="background: rgba(238, 9, 121, 0.1);">
                        <td></td>
                        <td colspan="3" style="padding-right: 30px; font-weight: 600; color: #ee0979;">ğŸ’¸ ØªØ¯ÙÙ‚Ø§Øª Ø®Ø§Ø±Ø¬Ø©</td>
                    </tr>
                    <tr data-category="operating-out">
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø±ÙˆØ§ØªØ¨ØŒ Ø¥ÙŠØ¬Ø§Ø±ØŒ Ù…ØµØ§Ø±ÙŠÙ ØªØ´ØºÙŠÙ„ÙŠØ©"></td>
                        <td><input type="number" class="cf-amount" data-type="outflow" data-activity="operating" value="0" onchange="calculateCashflow()"></td>
                        <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"><button class="btn btn-add" onclick="addCashflowRow('operating-out')">+ Ø¥Ø¶Ø§ÙØ© ØªØ¯ÙÙ‚ Ø®Ø§Ø±Ø¬</button></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©</strong></td>
                        <td><strong id="operating-net">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- ===== Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© ===== -->
                    <tr style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                        <td colspan="4" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ“ˆ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© (Investing Activities)
                        </td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© -->
                    <tr style="background: rgba(17, 153, 142, 0.1);">
                        <td></td>
                        <td colspan="3" style="padding-right: 30px; font-weight: 600; color: #11998e;">ğŸ’µ ØªØ¯ÙÙ‚Ø§Øª Ø¯Ø§Ø®Ù„Ø©</td>
                    </tr>
                    <tr data-category="investing-in">
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø¨ÙŠØ¹ Ø£ØµÙˆÙ„ØŒ Ø¹ÙˆØ§Ø¦Ø¯ Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª"></td>
                        <td><input type="number" class="cf-amount" data-type="inflow" data-activity="investing" value="0" onchange="calculateCashflow()"></td>
                        <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"><button class="btn btn-add" onclick="addCashflowRow('investing-in')">+ Ø¥Ø¶Ø§ÙØ© ØªØ¯ÙÙ‚ Ø¯Ø§Ø®Ù„</button></td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© -->
                    <tr style="background: rgba(238, 9, 121, 0.1);">
                        <td></td>
                        <td colspan="3" style="padding-right: 30px; font-weight: 600; color: #ee0979;">ğŸ’¸ ØªØ¯ÙÙ‚Ø§Øª Ø®Ø§Ø±Ø¬Ø©</td>
                    </tr>
                    <tr data-category="investing-out">
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø±Ø§Ø¡ Ø£ØµÙˆÙ„ Ø«Ø§Ø¨ØªØ©ØŒ Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©"></td>
                        <td><input type="number" class="cf-amount" data-type="outflow" data-activity="investing" value="0" onchange="calculateCashflow()"></td>
                        <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"><button class="btn btn-add" onclick="addCashflowRow('investing-out')">+ Ø¥Ø¶Ø§ÙØ© ØªØ¯ÙÙ‚ Ø®Ø§Ø±Ø¬</button></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©</strong></td>
                        <td><strong id="investing-net">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- ===== Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© ===== -->
                    <tr style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">
                        <td colspan="4" style="padding: var(--spacing-md); font-size: 1.2em; font-weight: 700; text-align: center;">
                            ğŸ¦ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© (Financing Activities)
                        </td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© -->
                    <tr style="background: rgba(17, 153, 142, 0.1);">
                        <td></td>
                        <td colspan="3" style="padding-right: 30px; font-weight: 600; color: #11998e;">ğŸ’µ ØªØ¯ÙÙ‚Ø§Øª Ø¯Ø§Ø®Ù„Ø©</td>
                    </tr>
                    <tr data-category="financing-in">
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ø±ÙˆØ¶ Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø±Ø£Ø³ Ù…Ø§Ù„ Ø¥Ø¶Ø§ÙÙŠ"></td>
                        <td><input type="number" class="cf-amount" data-type="inflow" data-activity="financing" value="0" onchange="calculateCashflow()"></td>
                        <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"><button class="btn btn-add" onclick="addCashflowRow('financing-in')">+ Ø¥Ø¶Ø§ÙØ© ØªØ¯ÙÙ‚ Ø¯Ø§Ø®Ù„</button></td>
                    </tr>

                    <!-- Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ© -->
                    <tr style="background: rgba(238, 9, 121, 0.1);">
                        <td></td>
                        <td colspan="3" style="padding-right: 30px; font-weight: 600; color: #ee0979;">ğŸ’¸ ØªØ¯ÙÙ‚Ø§Øª Ø®Ø§Ø±Ø¬Ø©</td>
                    </tr>
                    <tr data-category="financing-out">
                        <td></td>
                        <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø³Ø¯Ø§Ø¯ Ù‚Ø±ÙˆØ¶ØŒ ØªÙˆØ²ÙŠØ¹Ø§Øª Ø£Ø±Ø¨Ø§Ø­"></td>
                        <td><input type="number" class="cf-amount" data-type="outflow" data-activity="financing" value="0" onchange="calculateCashflow()"></td>
                        <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"><button class="btn btn-add" onclick="addCashflowRow('financing-out')">+ Ø¥Ø¶Ø§ÙØ© ØªØ¯ÙÙ‚ Ø®Ø§Ø±Ø¬</button></td>
                    </tr>

                    <tr class="subtotal-row">
                        <td></td>
                        <td><strong>ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</strong></td>
                        <td><strong id="financing-net">0</strong></td>
                        <td></td>
                    </tr>

                    <!-- ===== Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª ===== -->
                    <tr style="height: 20px; background: var(--bg-primary);"><td colspan="4"></td></tr>

                    <tr class="total-row">
                        <td></td>
                        <td><strong>ğŸ’µ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„Ø©</strong></td>
                        <td><strong id="total-inflows-table">0</strong></td>
                        <td></td>
                    </tr>

                    <tr class="total-row">
                        <td></td>
                        <td><strong>ğŸ’¸ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬Ø©</strong></td>
                        <td><strong id="total-outflows-table">0</strong></td>
                        <td></td>
                    </tr>

                    <tr class="grand-total-row" style="background: linear-gradient(135deg, rgba(63, 94, 251, 0.1) 0%, rgba(252, 70, 107, 0.1) 100%);">
                        <td></td>
                        <td><strong>ğŸ’ ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ</strong></td>
                        <td><strong id="net-cashflow-table" style="font-size: 1.3em;">0</strong></td>
                        <td></td>
                    </tr>

                    <tr style="background: #e7f3ff; border: 2px solid #0d6efd;">
                        <td colspan="4" style="padding: var(--spacing-md); text-align: center; color: #0d6efd; font-weight: 600;">
                            ğŸ’¡ <strong>Ù‚Ø§Ø¹Ø¯Ø© Ø°Ù‡Ø¨ÙŠØ©:</strong> ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ø§Ù„Ù…ÙˆØ¬Ø¨ (+) ÙŠØ¹Ù†ÙŠ Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©ØŒ Ø§Ù„Ø³Ø§Ù„Ø¨ (-) ÙŠØ¹Ù†ÙŠ Ù†Ù‚Øµ ÙÙŠ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-top: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠ</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--accent-color);" id="operating-ratio">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒÙØ§ÙŠØ© Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);" id="cash-sufficiency">0%</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„Ø© / Ø§Ù„Ø®Ø§Ø±Ø¬Ø©</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø±Ù‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--warning-color);" id="burn-rate">0</div>
                        <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 5px;">Ø´Ù‡Ø±ÙŠØ§Ù‹ (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø³Ø§Ù„Ø¨)</div>
                    </div>
                </div>
            </div>

            <button class="btn btn-export" onclick="exportToPDF('cashflow')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© -->
        <div id="tax" class="tab-content">
            <h2 class="section-title">ğŸ§¾ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© - Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„Ø¶Ø±Ø§Ø¦Ø¨</h2>
            
            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl);">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø³Ù†ÙˆÙŠ</div>
                    <div style="font-size: 2em; font-weight: 700;" id="tax-total-income">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø© (2.5%)</div>
                    <div style="font-size: 2em; font-weight: 700;" id="zakat-amount">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’¼ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="tax-amount">0</div>
                </div>
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: var(--spacing-lg); border-radius: 8px; color: white; text-align: center;">
                    <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 5px;">ğŸ’° ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©</div>
                    <div style="font-size: 2em; font-weight: 700;" id="net-after-tax">0</div>
                </div>
            </div>

            <!-- Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø²ÙƒØ§Ø© -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ•Œ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø²ÙƒØ§Ø©</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th style="width: 50%">Ø§Ù„Ø¨Ù†Ø¯</th>
                            <th style="width: 50%">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©</td>
                            <td><input type="number" id="zakat-cash" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr>
                            <td>Ø§Ù„Ø°Ù‡Ø¨ ÙˆØ§Ù„ÙØ¶Ø© (Ø¨Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©)</td>
                            <td><input type="number" id="zakat-gold" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr>
                            <td>Ø§Ù„Ø£Ø³Ù‡Ù… ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª</td>
                            <td><input type="number" id="zakat-stocks" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr>
                            <td>Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© (Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©)</td>
                            <td><input type="number" id="zakat-property" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr>
                            <td>Ø¨Ø¶Ø§Ø¹Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø© (Ø¨Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚)</td>
                            <td><input type="number" id="zakat-inventory" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr>
                            <td>Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø±Ø¬ÙˆØ© (Ù„Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†)</td>
                            <td><input type="number" id="zakat-receivables" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr class="subtotal-row">
                            <td><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ø²ÙƒÙˆÙŠØ©</strong></td>
                            <td><strong id="zakat-total-zakawi">0</strong></td>
                        </tr>
                        <tr>
                            <td>Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø© (Ø¹Ù„ÙŠÙƒ ÙÙˆØ±Ø§Ù‹)</td>
                            <td><input type="number" id="zakat-debts" value="0" onchange="calculateZakat()"></td>
                        </tr>
                        <tr class="total-row">
                            <td><strong>Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø²ÙƒÙˆÙŠ (Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø®Ø§Ø¶Ø¹ Ù„Ù„Ø²ÙƒØ§Ø©)</strong></td>
                            <td><strong id="zakat-base">0</strong></td>
                        </tr>
                        <tr style="background: #d4edda;">
                            <td><strong>Ø§Ù„Ù†ØµØ§Ø¨ (85 Ø¬Ø±Ø§Ù… Ø°Ù‡Ø¨ Ã— Ø§Ù„Ø³Ø¹Ø±)</strong></td>
                            <td><input type="number" id="nisab-value" value="0" placeholder="Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†ØµØ§Ø¨" onchange="calculateZakat()"></td>
                        </tr>
                        <tr class="grand-total-row">
                            <td><strong>ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø© (2.5%)</strong></td>
                            <td><strong id="zakat-due" style="font-size: 1.3em;">0</strong></td>
                        </tr>
                        <tr style="background: #fff3cd;">
                            <td colspan="2" style="padding: var(--spacing-md); text-align: center; color: #856404;">
                                <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ø¬Ø¨Ø© Ø¥Ø°Ø§ Ø¨Ù„Øº Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù†ØµØ§Ø¨ ÙˆØ­Ø§Ù„ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø­ÙˆÙ„ (Ø³Ù†Ø© ÙƒØ§Ù…Ù„Ø©)
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¯Ø®Ù„</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th style="width: 50%">Ø§Ù„Ø¨Ù†Ø¯</th>
                            <th style="width: 50%">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø³Ù†ÙˆÙŠ</td>
                            <td><input type="number" id="tax-income" value="0" onchange="calculateTax()" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                        </tr>
                        <tr>
                            <td>Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø¥Ø¹ÙØ§Ø¡Ø§Øª</td>
                            <td><input type="number" id="tax-deductions" value="0" onchange="calculateTax()"></td>
                        </tr>
                        <tr class="subtotal-row">
                            <td><strong>Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø®Ø§Ø¶Ø¹ Ù„Ù„Ø¶Ø±ÙŠØ¨Ø©</strong></td>
                            <td><strong id="taxable-income">0</strong></td>
                        </tr>
                        <tr>
                            <td>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (%)</td>
                            <td><input type="number" id="tax-rate" value="0" min="0" max="100" step="0.1" onchange="calculateTax()"></td>
                        </tr>
                        <tr class="grand-total-row">
                            <td><strong>ğŸ’¼ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</strong></td>
                            <td><strong id="tax-due" style="font-size: 1.3em;">0</strong></td>
                        </tr>
                        <tr style="background: #e7f3ff;">
                            <td colspan="2" style="padding: var(--spacing-md); text-align: center; color: #0d6efd;">
                                <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù†Ø³Ø¨ Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©. Ø§Ø³ØªØ´Ø± Ù…Ø³ØªØ´Ø§Ø± Ø¶Ø±ÙŠØ¨ÙŠ Ù„Ù„ØªØ£ÙƒØ¯.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸª Ø­Ø§Ø³Ø¨Ø© Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (VAT)</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-lg);">
                    <div>
                        <h4 style="margin-bottom: var(--spacing-sm); color: var(--text-primary);">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</h4>
                        <table>
                            <tbody>
                                <tr>
                                    <td>Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</td>
                                    <td><input type="number" id="vat-price-before" value="0" onchange="calculateVAT('add')"></td>
                                </tr>
                                <tr>
                                    <td>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (%)</td>
                                    <td><input type="number" id="vat-rate-add" value="15" onchange="calculateVAT('add')"></td>
                                </tr>
                                <tr class="subtotal-row">
                                    <td><strong>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</strong></td>
                                    <td><strong id="vat-amount-add">0</strong></td>
                                </tr>
                                <tr class="total-row">
                                    <td><strong>Ø§Ù„Ø³Ø¹Ø± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</strong></td>
                                    <td><strong id="vat-price-after">0</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div>
                        <h4 style="margin-bottom: var(--spacing-sm); color: var(--text-primary);">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</h4>
                        <table>
                            <tbody>
                                <tr>
                                    <td>Ø§Ù„Ø³Ø¹Ø± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</td>
                                    <td><input type="number" id="vat-price-with" value="0" onchange="calculateVAT('extract')"></td>
                                </tr>
                                <tr>
                                    <td>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (%)</td>
                                    <td><input type="number" id="vat-rate-extract" value="15" onchange="calculateVAT('extract')"></td>
                                </tr>
                                <tr class="subtotal-row">
                                    <td><strong>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</strong></td>
                                    <td><strong id="vat-amount-extract">0</strong></td>
                                </tr>
                                <tr class="total-row">
                                    <td><strong>Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</strong></td>
                                    <td><strong id="vat-price-without">0</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© -->
            <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl); border: 1px solid var(--border-color);">
                <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ø³Ù†ÙˆÙŠØ©</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ø§Ù„Ø²ÙƒØ§Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);" id="summary-zakat">0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--warning-color);" id="summary-income-tax">0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--danger-color);" id="summary-total-obligations">0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: 6px; border: 1px solid var(--border-color);">
                        <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ù† Ø§Ù„Ø¯Ø®Ù„</div>
                        <div style="font-size: 1.5em; font-weight: 700; color: var(--accent-color);" id="summary-obligations-ratio">0%</div>
                    </div>
                </div>
            </div>

            <button class="btn btn-export" onclick="exportToPDF('tax')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„ -->
        <div id="analysis" class="tab-content">
            <h2 class="section-title">ğŸ“ˆ ØªØ­Ù„ÙŠÙ„ Ù…ÙˆÙ‚Ù Ø§Ù„Ø£Ø³Ø±Ø©</h2>
            
            <div id="status-display" class="status-indicator">
                <div id="status-text">Ù‚Ù… Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>
                <div id="status-score" style="font-size: 2em; margin-top: 10px;"></div>
            </div>

            <table class="analysis-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
                        <th>Ø§Ù„Ù…ÙˆÙ‚Ù</th>
                        <th>Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‚ØªØ±Ø­</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="positive">+5</td>
                        <td>Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹</td>
                        <td>Ø§Ø³ØªÙ…Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù†Ù‡Ø¬ ÙˆØ²Ø¯ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª</td>
                    </tr>
                    <tr>
                        <td class="positive">+4</td>
                        <td>Ù…Ù…ØªØ§Ø²</td>
                        <td>ÙˆØ¶Ø¹ Ù…Ù…ØªØ§Ø²ØŒ ÙÙƒØ± ÙÙŠ ÙØ±Øµ Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</td>
                    </tr>
                    <tr>
                        <td class="positive">+3</td>
                        <td>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</td>
                        <td>Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙˆØ±Ø§Ø¬Ø¹ Ø®Ø·Ø© Ø§Ù„Ø§Ø¯Ø®Ø§Ø±</td>
                    </tr>
                    <tr>
                        <td class="positive">+2</td>
                        <td>Ø¬ÙŠØ¯</td>
                        <td>Ø­Ø§ÙˆÙ„ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙØ§Ø¦Ø¶ Ù…Ù† Ø®Ù„Ø§Ù„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©</td>
                    </tr>
                    <tr>
                        <td class="positive">+1</td>
                        <td>Ù…Ù†Ø§Ø³Ø¨</td>
                        <td>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø±Ù‚ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¯Ø®Ù„ Ø£Ùˆ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</td>
                    </tr>
                    <tr>
                        <td class="neutral">0</td>
                        <td>Ù…ØªÙˆØ§Ø²Ù†</td>
                        <td>Ø§Ù„ÙˆØ¶Ø¹ Ù…ØªÙˆØ§Ø²Ù†ØŒ Ù„ÙƒÙ† ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¨Ù†Ø§Ø¡ Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ø·ÙˆØ§Ø±Ø¦</td>
                    </tr>
                    <tr>
                        <td class="negative">-1</td>
                        <td>ØªØ±Ø§Ø¬Ø¹</td>
                        <td>Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆØ§Ø¨Ø­Ø« Ø¹Ù† Ù…ØµØ§Ø¯Ø± Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠØ©</td>
                    </tr>
                    <tr>
                        <td class="negative">-2</td>
                        <td>ØºÙŠØ± Ø¬ÙŠØ¯</td>
                        <td>Ù‚Ù„Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© ÙÙˆØ±Ø§Ù‹</td>
                    </tr>
                    <tr>
                        <td class="negative">-3</td>
                        <td>Ø³ÙŠØ¦</td>
                        <td>Ø£Ø¹Ø¯ Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙˆÙ‚Ù„Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ±</td>
                    </tr>
                    <tr>
                        <td class="negative">-4</td>
                        <td>Ø³ÙŠØ¦ Ø¬Ø¯Ø§Ù‹</td>
                        <td>ØªØ¯Ø®Ù„ Ø¹Ø§Ø¬Ù„ Ù…Ø·Ù„ÙˆØ¨ - Ø±Ø§Ø¬Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª ÙˆØ§Ù„Ø¯ÙŠÙˆÙ†</td>
                    </tr>
                    <tr>
                        <td class="negative">-5</td>
                        <td>ÙŠØ­ØªØ§Ø¬ ØªØ¯Ø®Ù„ Ø¹Ø§Ø¬Ù„</td>
                        <td>Ø§Ø³ØªØ´Ø± Ù…Ø³ØªØ´Ø§Ø± Ù…Ø§Ù„ÙŠ ÙÙˆØ±Ø§Ù‹ ÙˆØ£Ø¹Ø¯ Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†</td>
                    </tr>
                </tbody>
            </table>

            <button class="btn btn-export" onclick="exportToPDF('analysis')">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø© Ù„Ù„ØªØ­Ù„ÙŠÙ„</button>
        </div>
    </div>

    <script>
        // ==================== Ù†Ø¸Ø§Ù… ØªÙ‚ÙŠÙŠØ¯ ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Admin ====================
        
        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
         * ÙŠÙ…ÙƒÙ† Ù„Ù„Ø£Ø¯Ù…Ù† ØªØºÙŠÙŠØ±Ù‡Ø§ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
         */
        const DEFAULT_CONFIG = {
            enabled: true,
            startHour: 9,
            endHour: 17,
            allowedDays: [0, 1, 2, 3, 4, 5, 6],
            adminPassword: 'admin123',  // âš ï¸ ØºÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‡Ø°Ù‡!
            messages: {
                outsideHours: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø© {start} ØµØ¨Ø§Ø­Ø§Ù‹ Ø¥Ù„Ù‰ {end} Ù…Ø³Ø§Ø¡Ù‹',
                blockedDay: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ø§ ÙŠØ¹Ù…Ù„ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…',
                remainingTime: 'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…: {hours} Ø³Ø§Ø¹Ø© Ùˆ {minutes} Ø¯Ù‚ÙŠÙ‚Ø©'
            }
        };

        /**
         * ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† LocalStorage Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
         */
        function loadWorkHoursConfig() {
            const saved = localStorage.getItem('workHoursConfig');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    return { ...DEFAULT_CONFIG, ...parsed };
                } catch (e) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', e);
                    return DEFAULT_CONFIG;
                }
            }
            return DEFAULT_CONFIG;
        }

        /**
         * Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ LocalStorage
         */
        function saveWorkHoursConfig(config) {
            try {
                localStorage.setItem('workHoursConfig', JSON.stringify(config));
                return true;
            } catch (e) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', e);
                return false;
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        let WORK_HOURS_CONFIG = loadWorkHoursConfig();

        /**
         * Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†
         */
        function showAdminPanel() {
            // Ø·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
            const password = prompt('ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù†:');
            
            if (password !== WORK_HOURS_CONFIG.adminPassword) {
                alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            const panel = document.createElement('div');
            panel.id = 'admin-panel';
            panel.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                z-index: 99999;
                overflow-y: auto;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                font-family: 'Cairo', sans-serif;
            `;

            panel.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 15px;
                    padding: 30px;
                    max-width: 600px;
                    width: 100%;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2 style="margin: 0; color: #333; font-size: 24px;">
                            ğŸ” Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†
                        </h2>
                        <button onclick="closeAdminPanel()" style="
                            background: #dc3545;
                            color: white;
                            border: none;
                            padding: 8px 15px;
                            border-radius: 5px;
                            cursor: pointer;
                            font-family: 'Cairo', sans-serif;
                            font-weight: 600;
                        ">âœ• Ø¥ØºÙ„Ø§Ù‚</button>
                    </div>

                    <div style="
                        background: #e7f3ff;
                        border: 2px solid #0d6efd;
                        border-radius: 8px;
                        padding: 12px;
                        margin-bottom: 20px;
                        font-size: 13px;
                        color: #0d6efd;
                    ">
                        <strong>ğŸ”‘ Ø·Ø±Ù‚ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ©:</strong><br>
                        â€¢ Ø§Ø®ØªØµØ§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­: <code style="background: white; padding: 2px 6px; border-radius: 3px;">Ctrl+Shift+A</code><br>
                        â€¢ Ø§Ù†Ù‚Ø± 5 Ù…Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø© ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ Ø§Ù„Ø¹Ù„ÙŠØ§<br>
                        â€¢ Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹: <code style="background: white; padding: 2px 6px; border-radius: 3px;">?admin=true</code>
                    </div>

                    <div style="
                        background: #fff3cd;
                        border: 2px solid #ffc107;
                        border-radius: 8px;
                        padding: 12px;
                        margin-bottom: 20px;
                        font-size: 13px;
                        color: #856404;
                    ">
                        <strong>ğŸš¨ Ø¥Ø°Ø§ Ø£ØºÙ„Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ø®Ø§Ø±Ø¬ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„):</strong><br>
                        â€¢ Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹: <code style="background: white; padding: 2px 6px; border-radius: 3px;">?bypass=true</code><br>
                        â€¢ Ø£Ùˆ Ø§Ø¶ØºØ· Ø²Ø± "Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†" ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø±
                    </div>

                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="margin: 0 0 15px 0; color: #495057; font-size: 18px;">ğŸ“Š Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                        <div style="display: grid; gap: 10px;">
                            <div style="padding: 10px; background: white; border-radius: 5px;">
                                <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${WORK_HOURS_CONFIG.enabled ? 'ğŸŸ¢ Ù…ÙØ¹Ù‘Ù„' : 'ğŸ”´ Ù…Ø¹Ø·Ù‘Ù„'}
                            </div>
                            <div style="padding: 10px; background: white; border-radius: 5px;">
                                <strong>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„:</strong> Ù…Ù† ${WORK_HOURS_CONFIG.startHour}:00 Ø¥Ù„Ù‰ ${WORK_HOURS_CONFIG.endHour}:00
                            </div>
                            <div style="padding: 10px; background: white; border-radius: 5px;">
                                <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©:</strong> ${WORK_HOURS_CONFIG.endHour - WORK_HOURS_CONFIG.startHour} Ø³Ø§Ø¹Ø©
                            </div>
                            <div style="padding: 10px; background: white; border-radius: 5px;">
                                <strong>Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„:</strong> ${getDaysText(WORK_HOURS_CONFIG.allowedDays)}
                            </div>
                        </div>
                    </div>

                    <form id="admin-form" style="display: grid; gap: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
                            </label>
                            <select id="admin-enabled" style="
                                width: 100%;
                                padding: 10px;
                                border: 2px solid #dee2e6;
                                border-radius: 5px;
                                font-family: 'Cairo', sans-serif;
                                font-size: 14px;
                            ">
                                <option value="true" ${WORK_HOURS_CONFIG.enabled ? 'selected' : ''}>ğŸŸ¢ Ù…ÙØ¹Ù‘Ù„</option>
                                <option value="false" ${!WORK_HOURS_CONFIG.enabled ? 'selected' : ''}>ğŸ”´ Ù…Ø¹Ø·Ù‘Ù„</option>
                            </select>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                â° Ø³Ø§Ø¹Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (0-23)
                            </label>
                            <input type="number" id="admin-start" min="0" max="23" value="${WORK_HOURS_CONFIG.startHour}" style="
                                width: 100%;
                                padding: 10px;
                                border: 2px solid #dee2e6;
                                border-radius: 5px;
                                font-family: 'Cairo', sans-serif;
                                font-size: 14px;
                            ">
                            <small style="color: #6c757d; display: block; margin-top: 5px;">
                                Ù…Ø«Ø§Ù„: 8 = 8 ØµØ¨Ø§Ø­Ø§Ù‹ØŒ 14 = 2 Ø¸Ù‡Ø±Ø§Ù‹
                            </small>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                â° Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© (0-23)
                            </label>
                            <input type="number" id="admin-end" min="0" max="23" value="${WORK_HOURS_CONFIG.endHour}" style="
                                width: 100%;
                                padding: 10px;
                                border: 2px solid #dee2e6;
                                border-radius: 5px;
                                font-family: 'Cairo', sans-serif;
                                font-size: 14px;
                            ">
                            <small style="color: #6c757d; display: block; margin-top: 5px;">
                                Ù…Ø«Ø§Ù„: 17 = 5 Ù…Ø³Ø§Ø¡Ù‹ØŒ 20 = 8 Ù…Ø³Ø§Ø¡Ù‹
                            </small>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                ğŸ“… Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„
                            </label>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                ${['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'].map((day, i) => `
                                    <label style="
                                        display: flex;
                                        align-items: center;
                                        padding: 10px;
                                        background: #f8f9fa;
                                        border-radius: 5px;
                                        cursor: pointer;
                                        border: 2px solid ${WORK_HOURS_CONFIG.allowedDays.includes(i) ? '#28a745' : '#dee2e6'};
                                    ">
                                        <input type="checkbox" class="admin-day" value="${i}" 
                                            ${WORK_HOURS_CONFIG.allowedDays.includes(i) ? 'checked' : ''}
                                            style="margin-left: 8px; width: 18px; height: 18px; cursor: pointer;">
                                        <span style="font-size: 14px;">${day}</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>

                        <div style="
                            background: #fff3cd;
                            border: 2px solid #ffc107;
                            border-radius: 8px;
                            padding: 15px;
                            margin-top: 10px;
                        ">
                            <div style="display: flex; align-items: start; gap: 10px;">
                                <span style="font-size: 24px;">ğŸ’¡</span>
                                <div>
                                    <strong style="color: #856404; display: block; margin-bottom: 5px;">Ù†Ù…Ø§Ø°Ø¬ Ø¬Ø§Ù‡Ø²Ø©:</strong>
                                    <div style="display: grid; gap: 8px; font-size: 13px; color: #856404;">
                                        <button type="button" onclick="applyPreset('government')" style="
                                            background: white;
                                            border: 1px solid #ffc107;
                                            padding: 8px;
                                            border-radius: 5px;
                                            cursor: pointer;
                                            text-align: right;
                                            font-family: 'Cairo', sans-serif;
                                        ">ğŸ›ï¸ Ø¯ÙˆØ§Ù… Ø­ÙƒÙˆÙ…ÙŠ (7:30-3:30ØŒ Ø§Ù„Ø£Ø­Ø¯-Ø§Ù„Ø®Ù…ÙŠØ³)</button>
                                        <button type="button" onclick="applyPreset('private')" style="
                                            background: white;
                                            border: 1px solid #ffc107;
                                            padding: 8px;
                                            border-radius: 5px;
                                            cursor: pointer;
                                            text-align: right;
                                            font-family: 'Cairo', sans-serif;
                                        ">ğŸ¢ Ø¯ÙˆØ§Ù… Ø®Ø§Øµ (9-6ØŒ Ø§Ù„Ø£Ø­Ø¯-Ø§Ù„Ø¬Ù…Ø¹Ø©)</button>
                                        <button type="button" onclick="applyPreset('flexible')" style="
                                            background: white;
                                            border: 1px solid #ffc107;
                                            padding: 8px;
                                            border-radius: 5px;
                                            cursor: pointer;
                                            text-align: right;
                                            font-family: 'Cairo', sans-serif;
                                        ">â° Ù…Ø±Ù† (6 Ø³Ø§Ø¹Ø§ØªØŒ ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…)</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                            <button type="button" onclick="saveAdminSettings()" style="
                                background: #28a745;
                                color: white;
                                border: none;
                                padding: 12px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-family: 'Cairo', sans-serif;
                                font-weight: 600;
                                font-size: 16px;
                            ">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                            
                            <button type="button" onclick="resetToDefault()" style="
                                background: #6c757d;
                                color: white;
                                border: none;
                                padding: 12px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-family: 'Cairo', sans-serif;
                                font-weight: 600;
                                font-size: 16px;
                            ">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                        </div>

                        <div style="margin-top: 20px; padding: 15px; background: #e7f3ff; border-radius: 8px; border: 2px solid #0d6efd;">
                            <h4 style="margin: 0 0 10px 0; color: #0d6efd; font-size: 16px;">ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù†</h4>
                            <input type="password" id="admin-new-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" style="
                                width: 100%;
                                padding: 10px;
                                border: 2px solid #0d6efd;
                                border-radius: 5px;
                                font-family: 'Cairo', sans-serif;
                                margin-bottom: 10px;
                            ">
                            <button type="button" onclick="changeAdminPassword()" style="
                                background: #0d6efd;
                                color: white;
                                border: none;
                                padding: 10px;
                                border-radius: 5px;
                                cursor: pointer;
                                font-family: 'Cairo', sans-serif;
                                font-weight: 600;
                                width: 100%;
                            ">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
                        </div>
                    </form>
                </div>
            `;

            document.body.appendChild(panel);

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ù„Ù„Ø£Ø­Ø¯Ø§Ø«
            document.querySelectorAll('.admin-day').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    this.parentElement.style.borderColor = this.checked ? '#28a745' : '#dee2e6';
                });
            });
        }

        /**
         * Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
         */
        function closeAdminPanel() {
            const panel = document.getElementById('admin-panel');
            if (panel) {
                panel.remove();
            }
        }

        /**
         * Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
         */
        function saveAdminSettings() {
            const enabled = document.getElementById('admin-enabled').value === 'true';
            const startHour = parseInt(document.getElementById('admin-start').value);
            const endHour = parseInt(document.getElementById('admin-end').value);
            const allowedDays = Array.from(document.querySelectorAll('.admin-day:checked')).map(cb => parseInt(cb.value));

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (startHour >= endHour) {
                alert('âŒ Ø®Ø·Ø£: Ø³Ø§Ø¹Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù‚Ø¨Ù„ Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©!');
                return;
            }

            if (allowedDays.length === 0 && enabled) {
                alert('âŒ Ø®Ø·Ø£: ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }

            // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            WORK_HOURS_CONFIG = {
                ...WORK_HOURS_CONFIG,
                enabled,
                startHour,
                endHour,
                allowedDays
            };

            if (saveWorkHoursConfig(WORK_HOURS_CONFIG)) {
                alert(`âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!\n\nğŸ“Š Ø§Ù„ØªÙØ§ØµÙŠÙ„:\nâ€¢ Ø¹Ø¯Ø¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: ${endHour - startHour} Ø³Ø§Ø¹Ø©\nâ€¢ Ù…Ù† ${startHour}:00 Ø¥Ù„Ù‰ ${endHour}:00\nâ€¢ Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„: ${getDaysText(allowedDays)}\n\nØ³ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙˆØ±Ø§Ù‹.`);
                closeAdminPanel();
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                setTimeout(() => location.reload(), 1000);
            } else {
                alert('âŒ ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }

        /**
         * ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¬Ø§Ù‡Ø²Ø©
         */
        function applyPreset(type) {
            const presets = {
                government: {
                    startHour: 7,
                    endHour: 15,
                    allowedDays: [0, 1, 2, 3, 4]
                },
                private: {
                    startHour: 9,
                    endHour: 18,
                    allowedDays: [0, 1, 2, 3, 4, 5]
                },
                flexible: {
                    startHour: 10,
                    endHour: 16,
                    allowedDays: [0, 1, 2, 3, 4, 5, 6]
                }
            };

            const preset = presets[type];
            if (preset) {
                document.getElementById('admin-start').value = preset.startHour;
                document.getElementById('admin-end').value = preset.endHour;
                
                document.querySelectorAll('.admin-day').forEach(cb => {
                    cb.checked = preset.allowedDays.includes(parseInt(cb.value));
                    cb.parentElement.style.borderColor = cb.checked ? '#28a745' : '#dee2e6';
                });
            }
        }

        /**
         * Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
         */
        function resetToDefault() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØŸ')) {
                WORK_HOURS_CONFIG = { ...DEFAULT_CONFIG };
                saveWorkHoursConfig(WORK_HOURS_CONFIG);
                alert('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­!');
                closeAdminPanel();
                setTimeout(() => location.reload(), 1000);
            }
        }

        /**
         * ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù†
         */
        function changeAdminPassword() {
            const newPassword = document.getElementById('admin-new-password').value;
            
            if (!newPassword || newPassword.length < 6) {
                alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }

            WORK_HOURS_CONFIG.adminPassword = newPassword;
            if (saveWorkHoursConfig(WORK_HOURS_CONFIG)) {
                alert('âœ… ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!\n\nğŸ” Ù„Ø§ ØªÙ†Ø³Ù‰ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.');
                document.getElementById('admin-new-password').value = '';
            }
        }

        /**
         * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ø§Ù„Ø£ÙŠØ§Ù…
         */
        function getDaysText(days) {
            const dayNames = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
            return days.map(d => dayNames[d]).join(', ');
        }

        /**
         * Ø§Ø®ØªØµØ§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ø£Ø¯Ù…Ù†
         * Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…: Ø§Ø¶ØºØ· Ctrl+Shift+A (Windows/Linux) Ø£Ùˆ Cmd+Shift+A (Mac)
         */
        let adminKeySequence = [];
        const ADMIN_KEY_COMBO = ['Control', 'Shift', 'A']; // ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø®ØªØµØ§Ø± Ù‡Ù†Ø§
        
        function setupAdminKeyboardShortcut() {
            document.addEventListener('keydown', function(e) {
                // Ctrl+Shift+A (Windows/Linux) Ø£Ùˆ Cmd+Shift+A (Mac)
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key.toLowerCase() === 'a') {
                    e.preventDefault();
                    showAdminPanel();
                    return;
                }
                
                // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø©: Ø§Ù„Ù†Ù‚Ø± 5 Ù…Ø±Ø§Øª Ø¹Ù„Ù‰ Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø´Ø§Ø´Ø©
                // (Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø³ÙÙ„)
            });
        }

        /**
         * Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø©: Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ø³Ø±ÙŠØ¹ ÙÙŠ Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø´Ø§Ø´Ø©
         * Ø§Ù†Ù‚Ø± 5 Ù…Ø±Ø§Øª Ù…ØªØªØ§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ Ø§Ù„Ø¹Ù„ÙŠØ§ Ø®Ù„Ø§Ù„ 2 Ø«Ø§Ù†ÙŠØ©
         */
        let clickCount = 0;
        let clickTimer = null;
        
        function setupAdminClickTrigger() {
            document.addEventListener('click', function(e) {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ù‚Ø± ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ Ø§Ù„Ø¹Ù„ÙŠØ§ (50x50 Ø¨ÙƒØ³Ù„)
                if (e.clientX > window.innerWidth - 50 && e.clientY < 50) {
                    clickCount++;
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
                    if (clickTimer) clearTimeout(clickTimer);
                    clickTimer = setTimeout(() => {
                        clickCount = 0;
                    }, 2000);
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø¹Ø¯ 5 Ù†Ù‚Ø±Ø§Øª
                    if (clickCount >= 5) {
                        clickCount = 0;
                        showAdminPanel();
                    }
                }
            });
        }

        /**
         * Ø·Ø±ÙŠÙ‚Ø© Ø«Ø§Ù„Ø«Ø©: Ø±Ø§Ø¨Ø· URL Ù…Ø®ÙÙŠ
         * Ø§ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹: ?admin=true
         * Ù…Ø«Ø§Ù„: http://example.com/app.html?admin=true
         */
        function checkAdminURL() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'true') {
                // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø· Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ù…Ø¹Ø§Ù…Ù„ admin ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·
                addVisibleAdminButton();
            }
        }

        /**
         * Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ù…Ø±Ø¦ÙŠ (ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø¨Ø· admin)
         */
        function addVisibleAdminButton() {
            const header = document.querySelector('.header');
            if (header && !document.getElementById('admin-btn')) {
                const adminBtn = document.createElement('button');
                adminBtn.id = 'admin-btn';
                adminBtn.innerHTML = 'âš™ï¸';
                adminBtn.title = 'Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†';
                adminBtn.style.cssText = `
                    position: absolute;
                    right: 20px;
                    top: 20px;
                    background: rgba(108, 117, 125, 0.1);
                    border: 1px solid var(--border-color);
                    padding: 8px 12px;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 18px;
                    transition: all 0.3s ease;
                `;
                adminBtn.onmouseover = function() {
                    this.style.background = 'var(--accent-color)';
                    this.style.transform = 'scale(1.1)';
                };
                adminBtn.onmouseout = function() {
                    this.style.background = 'rgba(108, 117, 125, 0.1)';
                    this.style.transform = 'scale(1)';
                };
                adminBtn.onclick = showAdminPanel;
                header.appendChild(adminBtn);
            }
        }

        /**
         * Ø¯Ø§Ù„Ø© bypass Ù„Ù„Ø£Ø¯Ù…Ù† Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø±
         */
        function adminBypass() {
            const password = prompt('ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù† Ù„Ù„Ø¯Ø®ÙˆÙ„:');
            
            if (password === WORK_HOURS_CONFIG.adminPassword) {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù…Ø¹ Ù…Ø¹Ø§Ù…Ù„ bypass
                const currentUrl = window.location.href.split('?')[0];
                window.location.href = currentUrl + '?bypass=true';
            } else {
                alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!');
            }
        }

        /**
         * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„
         */
        function checkWorkingHours() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† bypass ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø· (Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·)
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('bypass') === 'true' || urlParams.get('admin') === 'true') {
                console.log('âš ï¸ ØªÙ… ØªØ¬Ø§ÙˆØ² ØªÙ‚ÙŠÙŠØ¯ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (ÙˆØ¶Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù†)');
                return true; // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„
            }

            if (!WORK_HOURS_CONFIG.enabled) return true;

            const now = new Date();
            const currentHour = now.getHours();
            const currentDay = now.getDay();
            
            if (!WORK_HOURS_CONFIG.allowedDays.includes(currentDay)) {
                showBlockedScreen('blockedDay');
                return false;
            }
            
            if (currentHour < WORK_HOURS_CONFIG.startHour || currentHour >= WORK_HOURS_CONFIG.endHour) {
                showBlockedScreen('outsideHours');
                return false;
            }
            
            return true;
        }

        /**
         * Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø±
         */
        function showBlockedScreen(reason) {
            const message = WORK_HOURS_CONFIG.messages[reason]
                .replace('{start}', WORK_HOURS_CONFIG.startHour)
                .replace('{end}', WORK_HOURS_CONFIG.endHour);
            
            const container = document.querySelector('.container');
            if (container) {
                container.style.display = 'none';
            }
            
            const blockedScreen = document.createElement('div');
            blockedScreen.id = 'blocked-screen';
            blockedScreen.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                font-family: 'Cairo', sans-serif;
            `;
            
            blockedScreen.innerHTML = `
                <div style="
                    background: white;
                    padding: 40px;
                    border-radius: 20px;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                    text-align: center;
                    max-width: 500px;
                    margin: 20px;
                ">
                    <div style="font-size: 80px; margin-bottom: 20px;">ğŸ•</div>
                    <h1 style="
                        color: #333;
                        font-size: 28px;
                        margin-bottom: 15px;
                        font-weight: 700;
                    ">Ø®Ø§Ø±Ø¬ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„</h1>
                    <p style="
                        color: #666;
                        font-size: 18px;
                        line-height: 1.8;
                        margin-bottom: 25px;
                    ">${message}</p>
                    <div id="countdown-timer" style="
                        background: #f0f0f0;
                        padding: 15px;
                        border-radius: 10px;
                        font-size: 16px;
                        color: #555;
                        margin-bottom: 20px;
                    "></div>
                    <div style="
                        font-size: 14px;
                        color: #999;
                        margin-top: 20px;
                        margin-bottom: 25px;
                    ">
                        Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ: <strong id="current-time"></strong>
                    </div>
                    
                    <!-- Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø®ÙÙŠ -->
                    <div style="
                        border-top: 1px solid #eee;
                        padding-top: 20px;
                        margin-top: 20px;
                    ">
                        <button onclick="adminBypass()" style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            border: none;
                            padding: 12px 25px;
                            border-radius: 8px;
                            cursor: pointer;
                            font-family: 'Cairo', sans-serif;
                            font-weight: 600;
                            font-size: 14px;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.6)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)';">
                            ğŸ”‘ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† (Bypass)
                        </button>
                        <p style="
                            font-size: 12px;
                            color: #999;
                            margin-top: 10px;
                        ">Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø· - ÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(blockedScreen);
            
            updateBlockedScreenTime();
            setInterval(updateBlockedScreenTime, 1000);
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø±
         */
        function updateBlockedScreenTime() {
            const now = new Date();
            const currentTimeEl = document.getElementById('current-time');
            const countdownEl = document.getElementById('countdown-timer');
            
            if (currentTimeEl) {
                currentTimeEl.textContent = now.toLocaleTimeString('ar-SA', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    second: '2-digit'
                });
            }
            
            if (countdownEl) {
                const currentHour = now.getHours();
                let timeUntilStart;
                
                if (currentHour < WORK_HOURS_CONFIG.startHour) {
                    timeUntilStart = new Date(now);
                    timeUntilStart.setHours(WORK_HOURS_CONFIG.startHour, 0, 0, 0);
                } else {
                    timeUntilStart = new Date(now);
                    timeUntilStart.setDate(timeUntilStart.getDate() + 1);
                    timeUntilStart.setHours(WORK_HOURS_CONFIG.startHour, 0, 0, 0);
                }
                
                const diff = timeUntilStart - now;
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                countdownEl.innerHTML = `
                    â° Ø³ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø¹Ø¯: <strong>${hours}</strong> Ø³Ø§Ø¹Ø© Ùˆ <strong>${minutes}</strong> Ø¯Ù‚ÙŠÙ‚Ø© Ùˆ <strong>${seconds}</strong> Ø«Ø§Ù†ÙŠØ©
                `;
                
                if (hours === 0 && minutes === 0 && seconds === 0) {
                    location.reload();
                }
            }
        }

        /**
         * Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
         */
        function showRemainingTime() {
            if (!WORK_HOURS_CONFIG.enabled) return;
            
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            
            if (currentHour >= WORK_HOURS_CONFIG.startHour && currentHour < WORK_HOURS_CONFIG.endHour) {
                const remainingHours = WORK_HOURS_CONFIG.endHour - currentHour - 1;
                const remainingMinutes = 60 - currentMinute;
                
                const header = document.querySelector('.header p');
                if (header && remainingHours >= 0) {
                    const timeInfo = document.createElement('div');
                    timeInfo.style.cssText = `
                        margin-top: 10px;
                        padding: 8px 15px;
                        background: rgba(255, 193, 7, 0.1);
                        border-radius: 6px;
                        font-size: 0.9em;
                        color: var(--text-secondary);
                    `;
                    timeInfo.innerHTML = `â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${remainingHours} Ø³Ø§Ø¹Ø© Ùˆ ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
                    header.parentElement.appendChild(timeInfo);
                    
                    setInterval(() => {
                        const now = new Date();
                        const h = WORK_HOURS_CONFIG.endHour - now.getHours() - 1;
                        const m = 60 - now.getMinutes();
                        timeInfo.innerHTML = `â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${h} Ø³Ø§Ø¹Ø© Ùˆ ${m} Ø¯Ù‚ÙŠÙ‚Ø©`;
                        
                        if (h < 0) {
                            location.reload();
                        }
                    }, 60000);
                }
            }
        }

        /**
         * Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¯ÙˆØ±ÙŠ Ù…Ù† Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„
         */
        function startWorkHoursMonitoring() {
            setInterval(() => {
                if (!checkWorkingHours()) {
                    location.reload();
                }
            }, 60000);
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ù†Ø¸Ø§Ù… ØªÙ‚ÙŠÙŠØ¯ ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„ ====================

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ÙˆØ§Ù„Ù†Ù‡Ø§Ø±ÙŠ
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            const themeButton = document.querySelector('.theme-toggle');
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            if (newTheme === 'dark') {
                themeButton.innerHTML = 'â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ';
            } else {
                themeButton.innerHTML = 'ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ';
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const themeButton = document.querySelector('.theme-toggle');
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            if (savedTheme === 'dark') {
                themeButton.innerHTML = 'â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ';
            }
        }

        // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ§Ø¨ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            const activeTab = Array.from(tabs).find(tab => {
                const tabText = tab.textContent.trim();
                return (tabName === 'income' && tabText.includes('Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¯Ø®Ù„')) ||
                       (tabName === 'expenses' && tabText.includes('Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø±Ø©')) ||
                       (tabName === 'analysis' && tabText.includes('ØªØ­Ù„ÙŠÙ„ Ù…ÙˆÙ‚Ù'));
            });
            
            if (activeTab) activeTab.classList.add('active');
            
            const content = document.getElementById(tabName);
            if (content) content.classList.add('active');
            
            if (tabName === 'analysis') {
                updateAnalysis();
            }
        }

        // Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¯Ø®Ù„ Ø¬Ø¯ÙŠØ¯
        function addIncomeRow(category) {
            const tbody = document.getElementById('incomeBody');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-category', category);
            newRow.innerHTML = `
                <td></td>
                <td></td>
                <td><input type="text" placeholder="Ù…ØµØ¯Ø± Ø§Ù„Ø¯Ø®Ù„"></td>
                <td><input type="number" class="income-amount" data-category="${category}" value="0" onchange="calculateIncome()"></td>
                <td><button class="btn btn-remove" onclick="removeIncomeRow(this)">Ø­Ø°Ù</button></td>
            `;
            
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let addButtonRow = null;
            let foundCategory = false;
            
            for (let i = 0; i < allRows.length; i++) {
                const row = allRows[i];
                if (row.classList.contains('category-row') && row.textContent.includes(getCategoryName(category))) {
                    foundCategory = true;
                    continue;
                }
                if (foundCategory && row.querySelector('.btn-add')) {
                    addButtonRow = row;
                    break;
                }
            }
            
            if (addButtonRow) {
                tbody.insertBefore(newRow, addButtonRow);
            }
        }

        function getCategoryName(category) {
            const names = {
                'salaries': 'Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ø¨Ø¯Ù„Ø§Øª',
                'allowances': 'Ø§Ù„Ø¥Ø¹Ø§Ù†Ø§Øª',
                'investments': 'Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª',
                'others': 'Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø£Ø®Ø±Ù‰'
            };
            return names[category] || '';
        }

        function removeIncomeRow(btn) {
            btn.closest('tr').remove();
            calculateIncome();
        }

        function addExpenseRow(category) {
            const tbody = document.getElementById('expensesBody');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-category', category);
            newRow.innerHTML = `
                <td></td>
                <td></td>
                <td><input type="text" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…ØµØ±ÙˆÙ"></td>
                <td><input type="number" class="expense-amount" data-category="${category}" value="0" onchange="calculateExpenses()"></td>
                <td><button class="btn btn-remove" onclick="removeExpenseRow(this)">Ø­Ø°Ù</button></td>
            `;
            
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let addButtonRow = null;
            let foundCategory = false;
            
            for (let i = 0; i < allRows.length; i++) {
                const row = allRows[i];
                if (row.classList.contains('category-row') && row.textContent.includes(getExpenseCategoryName(category))) {
                    foundCategory = true;
                    continue;
                }
                if (foundCategory && row.querySelector('.btn-add')) {
                    addButtonRow = row;
                    break;
                }
            }
            
            if (addButtonRow) {
                tbody.insertBefore(newRow, addButtonRow);
            }
        }

        function getExpenseCategoryName(category) {
            const names = {
                'transport': 'Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª',
                'housing': 'Ø§Ù„Ø¨ÙŠØª',
                'groceries': 'Ø§Ù„Ù…Ù‚Ø§Ø¶ÙŠ',
                'maintenance': 'ØµÙŠØ§Ù†Ø©',
                'entertainment': 'Ø§Ù„ØªØ±ÙÙŠÙ‡',
                'health': 'Ø§Ù„ØµØ­Ø©',
                'education': 'Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
                'charity': 'Ø§Ù„ØµØ¯Ù‚Ø§Øª',
                'debts': 'Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª',
                'savings': 'Ø§Ø¯Ø®Ø§Ø±'
            };
            return names[category] || '';
        }

        function removeExpenseRow(btn) {
            btn.closest('tr').remove();
            calculateExpenses();
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ… ====================

        function addAssetRow(category) {
            const tbody = document.getElementById('assetsBody');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-category', category);
            
            // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ (Ø£ØµÙ„ Ø£Ùˆ Ø®ØµÙ…)
            const isLiability = ['short-debt', 'bills', 'long-debt'].includes(category);
            const dataType = isLiability ? 'liability' : 'asset';
            
            newRow.innerHTML = `
                <td></td>
                <td></td>
                <td><input type="text" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†"></td>
                <td><input type="number" class="asset-amount" data-category="${category}" data-type="${dataType}" value="0" onchange="calculateAssets()"></td>
                <td><button class="btn btn-remove" onclick="removeAssetRow(this)">Ø­Ø°Ù</button></td>
            `;
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let addButtonRow = null;
            let foundCategory = false;
            
            for (let i = 0; i < allRows.length; i++) {
                const row = allRows[i];
                if (row.querySelector(`[data-category="${category}"]`)) {
                    foundCategory = true;
                    continue;
                }
                if (foundCategory && row.querySelector('.btn-add')) {
                    addButtonRow = row;
                    break;
                }
            }
            
            if (addButtonRow) {
                tbody.insertBefore(newRow, addButtonRow);
            }
        }

        function removeAssetRow(btn) {
            btn.closest('tr').remove();
            calculateAssets();
        }

        function calculateAssets() {
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ØµÙˆÙ„
            const assetCategories = {
                'cash': 0,
                'short-investments': 0,
                'real-estate': 0,
                'vehicles': 0,
                'furniture': 0,
                'long-investments': 0
            };
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®ØµÙˆÙ…
            const liabilityCategories = {
                'short-debt': 0,
                'bills': 0,
                'long-debt': 0
            };
            
            // Ø¬Ù…Ø¹ Ù‚ÙŠÙ… Ø§Ù„Ø£ØµÙˆÙ„
            document.querySelectorAll('.asset-amount[data-type="asset"]').forEach(input => {
                const category = input.getAttribute('data-category');
                const value = parseFloat(input.value) || 0;
                if (assetCategories.hasOwnProperty(category)) {
                    assetCategories[category] += value;
                }
            });
            
            // Ø¬Ù…Ø¹ Ù‚ÙŠÙ… Ø§Ù„Ø®ØµÙˆÙ…
            document.querySelectorAll('.asset-amount[data-type="liability"]').forEach(input => {
                const category = input.getAttribute('data-category');
                const value = parseFloat(input.value) || 0;
                if (liabilityCategories.hasOwnProperty(category)) {
                    liabilityCategories[category] += value;
                }
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø¹ÙŠØ© - Ø§Ù„Ø£ØµÙˆÙ„
            const currentAssets = assetCategories['cash'] + assetCategories['short-investments'];
            const fixedAssets = assetCategories['real-estate'] + assetCategories['vehicles'] + assetCategories['furniture'];
            const longInvestments = assetCategories['long-investments'];
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø¹ÙŠØ© - Ø§Ù„Ø®ØµÙˆÙ…
            const currentLiabilities = liabilityCategories['short-debt'] + liabilityCategories['bills'];
            const longLiabilities = liabilityCategories['long-debt'];
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ…
            const totalAssets = currentAssets + fixedAssets + longInvestments;
            const totalLiabilities = currentLiabilities + longLiabilities;
            const netWorth = totalAssets - totalLiabilities;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            document.getElementById('current-assets-total').textContent = currentAssets.toLocaleString();
            document.getElementById('fixed-assets-total').textContent = fixedAssets.toLocaleString();
            document.getElementById('long-investments-total').textContent = longInvestments.toLocaleString();
            document.getElementById('total-assets').textContent = totalAssets.toLocaleString();
            
            document.getElementById('current-liabilities-total').textContent = currentLiabilities.toLocaleString();
            document.getElementById('long-liabilities-total').textContent = longLiabilities.toLocaleString();
            document.getElementById('total-liabilities').textContent = totalLiabilities.toLocaleString();
            
            document.getElementById('net-worth').textContent = netWorth.toLocaleString();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            document.getElementById('total-assets-display').textContent = totalAssets.toLocaleString();
            document.getElementById('total-liabilities-display').textContent = totalLiabilities.toLocaleString();
            document.getElementById('net-worth-display').textContent = netWorth.toLocaleString();
            
            // ØªÙ„ÙˆÙŠÙ† ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©
            const netWorthEl = document.getElementById('net-worth');
            const netWorthDisplayEl = document.getElementById('net-worth-display');
            const color = netWorth >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            netWorthEl.style.color = color;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            calculateFinancialRatios(totalAssets, totalLiabilities, netWorth);
            updateDashboard(); // ØªØ­Ø¯ÙŠØ« Dashboard
        }

        function calculateFinancialRatios(totalAssets, totalLiabilities, netWorth) {
            // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø£ØµÙˆÙ„ (Debt to Assets Ratio)
            let debtToAssets = 0;
            if (totalAssets > 0) {
                debtToAssets = (totalLiabilities / totalAssets) * 100;
            }
            
            // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙ† Ø¥Ù„Ù‰ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© (Debt to Equity Ratio)
            let debtToEquity = 0;
            if (netWorth > 0) {
                debtToEquity = (totalLiabilities / netWorth) * 100;
            } else if (totalLiabilities > 0) {
                debtToEquity = 999; // Ù‚ÙŠÙ…Ø© Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ ÙˆØ¶Ø¹ Ø®Ø·ÙŠØ±
            }
            
            // Ù†Ø³Ø¨Ø© Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© (Equity Ratio)
            let equityRatio = 0;
            if (totalAssets > 0) {
                equityRatio = (netWorth / totalAssets) * 100;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            const debtToAssetsEl = document.getElementById('debt-to-assets-ratio');
            debtToAssetsEl.textContent = debtToAssets.toFixed(1) + '%';
            debtToAssetsEl.style.color = debtToAssets > 50 ? 'var(--danger-color)' : 
                                          debtToAssets > 30 ? 'var(--warning-color)' : 
                                          'var(--success-color)';
            
            const debtToEquityEl = document.getElementById('debt-to-equity-ratio');
            if (debtToEquity >= 999) {
                debtToEquityEl.textContent = 'âš ï¸ Ø®Ø·Ø±';
                debtToEquityEl.style.color = 'var(--danger-color)';
            } else {
                debtToEquityEl.textContent = debtToEquity.toFixed(1) + '%';
                debtToEquityEl.style.color = debtToEquity > 100 ? 'var(--danger-color)' : 
                                              debtToEquity > 50 ? 'var(--warning-color)' : 
                                              'var(--success-color)';
            }
            
            const equityRatioEl = document.getElementById('equity-ratio');
            equityRatioEl.textContent = equityRatio.toFixed(1) + '%';
            equityRatioEl.style.color = equityRatio > 70 ? 'var(--success-color)' : 
                                         equityRatio > 50 ? 'var(--warning-color)' : 
                                         'var(--danger-color)';
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ… ====================

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯Ø§Ø¦Ù†Ø© ====================

        function addReceivableRow(category) {
            const tbody = document.getElementById('receivablesBody');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-category', category);
            
            const nameClass = category.includes('payable') ? 'creditor-name' : 'debtor-name';
            const namePlaceholder = category.includes('payable') ? 'Ø§Ø³Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†' : 'Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†';
            
            newRow.innerHTML = `
                <td></td>
                <td><input type="text" placeholder="${namePlaceholder}" class="${nameClass}"></td>
                <td><input type="number" class="original-amount" value="0" onchange="calculateReceivables()"></td>
                <td><input type="number" class="paid-amount" value="0" onchange="calculateReceivables()"></td>
                <td><input type="number" class="remaining-amount" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                <td><input type="date" class="due-date"></td>
                <td><button class="btn btn-remove" onclick="removeReceivableRow(this)">Ø­Ø°Ù</button></td>
            `;
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let addButtonRow = null;
            let foundCategory = false;
            
            for (let i = 0; i < allRows.length; i++) {
                const row = allRows[i];
                if (row.getAttribute('data-category') === category) {
                    foundCategory = true;
                    continue;
                }
                if (foundCategory && row.querySelector('.btn-add')) {
                    addButtonRow = row;
                    break;
                }
            }
            
            if (addButtonRow) {
                tbody.insertBefore(newRow, addButtonRow);
            }
        }

        function removeReceivableRow(btn) {
            btn.closest('tr').remove();
            calculateReceivables();
        }

        function calculateReceivables() {
            // ÙØ¦Ø§Øª Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ù„Ù†Ø§)
            const receivableCategories = ['personal-receivable', 'work-receivable', 'sales-receivable'];
            
            // ÙØ¦Ø§Øª Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© (Ø¹Ù„ÙŠÙ†Ø§)
            const payableCategories = ['personal-payable', 'purchase-payable', 'bills-payable'];
            
            let totalReceivablesOriginal = 0;
            let totalReceivablesPaid = 0;
            let totalReceivablesRemaining = 0;
            
            let totalPayablesOriginal = 0;
            let totalPayablesPaid = 0;
            let totalPayablesRemaining = 0;
            
            let receivableCount = 0;
            let payableCount = 0;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
            receivableCategories.forEach(category => {
                let categoryOriginal = 0;
                let categoryPaid = 0;
                let categoryRemaining = 0;
                
                const rows = document.querySelectorAll(`tr[data-category="${category}"]`);
                rows.forEach(row => {
                    const original = parseFloat(row.querySelector('.original-amount').value) || 0;
                    const paid = parseFloat(row.querySelector('.paid-amount').value) || 0;
                    const remaining = Math.max(0, original - paid);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
                    row.querySelector('.remaining-amount').value = remaining;
                    
                    categoryOriginal += original;
                    categoryPaid += paid;
                    categoryRemaining += remaining;
                    
                    if (original > 0) receivableCount++;
                });
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø¹ÙŠØ©
                document.getElementById(`${category}-original`).textContent = categoryOriginal.toLocaleString();
                document.getElementById(`${category}-paid`).textContent = categoryPaid.toLocaleString();
                document.getElementById(`${category}-remaining`).textContent = categoryRemaining.toLocaleString();
                
                totalReceivablesOriginal += categoryOriginal;
                totalReceivablesPaid += categoryPaid;
                totalReceivablesRemaining += categoryRemaining;
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†Ø©
            payableCategories.forEach(category => {
                let categoryOriginal = 0;
                let categoryPaid = 0;
                let categoryRemaining = 0;
                
                const rows = document.querySelectorAll(`tr[data-category="${category}"]`);
                rows.forEach(row => {
                    const original = parseFloat(row.querySelector('.original-amount').value) || 0;
                    const paid = parseFloat(row.querySelector('.paid-amount').value) || 0;
                    const remaining = Math.max(0, original - paid);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
                    row.querySelector('.remaining-amount').value = remaining;
                    
                    categoryOriginal += original;
                    categoryPaid += paid;
                    categoryRemaining += remaining;
                    
                    if (original > 0) payableCount++;
                });
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø¹ÙŠØ©
                document.getElementById(`${category}-original`).textContent = categoryOriginal.toLocaleString();
                document.getElementById(`${category}-paid`).textContent = categoryPaid.toLocaleString();
                document.getElementById(`${category}-remaining`).textContent = categoryRemaining.toLocaleString();
                
                totalPayablesOriginal += categoryOriginal;
                totalPayablesPaid += categoryPaid;
                totalPayablesRemaining += categoryRemaining;
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            document.getElementById('total-receivables-original').textContent = totalReceivablesOriginal.toLocaleString();
            document.getElementById('total-receivables-paid').textContent = totalReceivablesPaid.toLocaleString();
            document.getElementById('total-receivables-remaining').textContent = totalReceivablesRemaining.toLocaleString();
            
            document.getElementById('total-payables-original').textContent = totalPayablesOriginal.toLocaleString();
            document.getElementById('total-payables-paid').textContent = totalPayablesPaid.toLocaleString();
            document.getElementById('total-payables-remaining').textContent = totalPayablesRemaining.toLocaleString();
            
            // Ø­Ø³Ø§Ø¨ ØµØ§ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ²
            const netPosition = totalReceivablesRemaining - totalPayablesRemaining;
            document.getElementById('net-position').textContent = netPosition.toLocaleString();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            document.getElementById('total-receivables-display').textContent = totalReceivablesRemaining.toLocaleString();
            document.getElementById('total-payables-display').textContent = totalPayablesRemaining.toLocaleString();
            document.getElementById('net-position-display').textContent = netPosition.toLocaleString();
            
            // ØªÙ„ÙˆÙŠÙ† ØµØ§ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ²
            const netPositionEl = document.getElementById('net-position');
            const color = netPosition >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            netPositionEl.style.color = color;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨
            calculateReceivableRatios(
                totalReceivablesOriginal, totalReceivablesPaid, totalReceivablesRemaining,
                totalPayablesOriginal, totalPayablesPaid, totalPayablesRemaining,
                receivableCount, payableCount
            );
            
            // ÙØ­Øµ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§Øª
            checkDueDates();
        }

        function calculateReceivableRatios(
            receivablesOriginal, receivablesPaid, receivablesRemaining,
            payablesOriginal, payablesPaid, payablesRemaining,
            receivableCount, payableCount
        ) {
            // Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„
            let collectionRatio = 0;
            if (receivablesOriginal > 0) {
                collectionRatio = (receivablesPaid / receivablesOriginal) * 100;
            }
            
            // Ù†Ø³Ø¨Ø© Ø§Ù„Ø³Ø¯Ø§Ø¯
            let paymentRatio = 0;
            if (payablesOriginal > 0) {
                paymentRatio = (payablesPaid / payablesOriginal) * 100;
            }
            
            // Ù…ØªÙˆØ³Ø· Ø­Ø¬Ù… Ø§Ù„Ø¯ÙŠÙ†
            let avgDebtSize = 0;
            const totalTransactions = receivableCount + payableCount;
            if (totalTransactions > 0) {
                avgDebtSize = (receivablesOriginal + payablesOriginal) / totalTransactions;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            const collectionEl = document.getElementById('collection-ratio');
            collectionEl.textContent = collectionRatio.toFixed(1) + '%';
            collectionEl.style.color = collectionRatio > 70 ? 'var(--success-color)' : 
                                        collectionRatio > 40 ? 'var(--warning-color)' : 
                                        'var(--danger-color)';
            
            const paymentEl = document.getElementById('payment-ratio');
            paymentEl.textContent = paymentRatio.toFixed(1) + '%';
            paymentEl.style.color = paymentRatio > 70 ? 'var(--success-color)' : 
                                     paymentRatio > 40 ? 'var(--warning-color)' : 
                                     'var(--danger-color)';
            
            document.getElementById('avg-debt-size').textContent = avgDebtSize.toLocaleString(undefined, {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            });
        }

        function checkDueDates() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            let overdueReceivables = [];
            let overduePayables = [];
            let upcomingReceivables = [];
            let upcomingPayables = [];
            
            // ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ
            document.querySelectorAll('#receivablesBody tr[data-category]').forEach(row => {
                const category = row.getAttribute('data-category');
                const dueDateInput = row.querySelector('.due-date');
                const remainingInput = row.querySelector('.remaining-amount');
                const nameInput = row.querySelector('.debtor-name, .creditor-name');
                
                if (!dueDateInput || !dueDateInput.value || !remainingInput) return;
                
                const remaining = parseFloat(remainingInput.value) || 0;
                if (remaining <= 0) return;
                
                const dueDate = new Date(dueDateInput.value);
                dueDate.setHours(0, 0, 0, 0);
                
                const daysDiff = Math.floor((dueDate - today) / (1000 * 60 * 60 * 24));
                
                const name = nameInput ? nameInput.value : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                const isReceivable = !category.includes('payable');
                
                const item = {
                    name: name,
                    amount: remaining,
                    dueDate: dueDateInput.value,
                    daysDiff: daysDiff
                };
                
                if (daysDiff < 0) {
                    // Ù…ØªØ£Ø®Ø±
                    if (isReceivable) {
                        overdueReceivables.push(item);
                    } else {
                        overduePayables.push(item);
                    }
                } else if (daysDiff <= 7) {
                    // Ù‚Ø±ÙŠØ¨ (Ø®Ù„Ø§Ù„ Ø£Ø³Ø¨ÙˆØ¹)
                    if (isReceivable) {
                        upcomingReceivables.push(item);
                    } else {
                        upcomingPayables.push(item);
                    }
                }
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
            displayDueAlerts(overdueReceivables, overduePayables, upcomingReceivables, upcomingPayables);
        }

        function displayDueAlerts(overdueR, overdueP, upcomingR, upcomingP) {
            const alertsDiv = document.getElementById('due-alerts');
            
            if (overdueR.length === 0 && overdueP.length === 0 && upcomingR.length === 0 && upcomingP.length === 0) {
                alertsDiv.innerHTML = '';
                return;
            }
            
            let html = '<div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; border: 1px solid var(--border-color);">';
            html += '<h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">â° ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</h3>';
            
            // Ù…ØªØ£Ø®Ø±Ø§Øª - Ù„Ùƒ
            if (overdueR.length > 0) {
                html += '<div style="background: #fff3cd; border: 2px solid #ffc107; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">';
                html += '<strong style="color: #856404;">âš ï¸ Ù…Ø³ØªØ­Ù‚Ø§Øª Ù…ØªØ£Ø®Ø±Ø© Ù„Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†:</strong><ul style="margin: 10px 0 0 20px; color: #856404;">';
                overdueR.forEach(item => {
                    html += `<li>${item.name}: ${item.amount.toLocaleString()} (Ù…ØªØ£Ø®Ø± ${Math.abs(item.daysDiff)} ÙŠÙˆÙ…)</li>`;
                });
                html += '</ul></div>';
            }
            
            // Ù…ØªØ£Ø®Ø±Ø§Øª - Ø¹Ù„ÙŠÙƒ
            if (overdueP.length > 0) {
                html += '<div style="background: #f8d7da; border: 2px solid #dc3545; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">';
                html += '<strong style="color: #721c24;">ğŸš¨ Ù…Ø³ØªØ­Ù‚Ø§Øª Ù…ØªØ£Ø®Ø±Ø© Ø¹Ù„ÙŠÙƒ:</strong><ul style="margin: 10px 0 0 20px; color: #721c24;">';
                overdueP.forEach(item => {
                    html += `<li>${item.name}: ${item.amount.toLocaleString()} (Ù…ØªØ£Ø®Ø± ${Math.abs(item.daysDiff)} ÙŠÙˆÙ…)</li>`;
                });
                html += '</ul></div>';
            }
            
            // Ù‚Ø±ÙŠØ¨Ø© - Ù„Ùƒ
            if (upcomingR.length > 0) {
                html += '<div style="background: #d1ecf1; border: 2px solid #17a2b8; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">';
                html += '<strong style="color: #0c5460;">ğŸ“… Ù…Ø³ØªØ­Ù‚Ø§Øª Ù‚Ø±ÙŠØ¨Ø© Ù„Ùƒ:</strong><ul style="margin: 10px 0 0 20px; color: #0c5460;">';
                upcomingR.forEach(item => {
                    html += `<li>${item.name}: ${item.amount.toLocaleString()} (Ø®Ù„Ø§Ù„ ${item.daysDiff} ÙŠÙˆÙ…)</li>`;
                });
                html += '</ul></div>';
            }
            
            // Ù‚Ø±ÙŠØ¨Ø© - Ø¹Ù„ÙŠÙƒ
            if (upcomingP.length > 0) {
                html += '<div style="background: #d1ecf1; border: 2px solid #17a2b8; padding: var(--spacing-md); border-radius: 6px;">';
                html += '<strong style="color: #0c5460;">ğŸ“… Ù…Ø³ØªØ­Ù‚Ø§Øª Ù‚Ø±ÙŠØ¨Ø© Ø¹Ù„ÙŠÙƒ:</strong><ul style="margin: 10px 0 0 20px; color: #0c5460;">';
                upcomingP.forEach(item => {
                    html += `<li>${item.name}: ${item.amount.toLocaleString()} (Ø®Ù„Ø§Ù„ ${item.daysDiff} ÙŠÙˆÙ…)</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '</div>';
            alertsDiv.innerHTML = html;
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯Ø§Ø¦Ù†Ø© ====================

        // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ====================

        function addInventoryRow(category) {
            const tbody = document.getElementById('inventoryBody');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-category', category);
            
            newRow.innerHTML = `
                <td></td>
                <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"></td>
                <td><input type="number" class="inv-quantity" value="0" onchange="calculateInventory()"></td>
                <td><input type="number" class="inv-cost" value="0" onchange="calculateInventory()"></td>
                <td><input type="number" class="inv-price" value="0" onchange="calculateInventory()"></td>
                <td><input type="number" class="inv-stock-value" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                <td><input type="number" class="inv-profit" value="0" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                <td><input type="text" class="inv-margin" value="0%" readonly style="background: #f8f9fa; cursor: not-allowed;"></td>
                <td><button class="btn btn-remove" onclick="removeInventoryRow(this)">Ø­Ø°Ù</button></td>
            `;
            
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let addButtonRow = null;
            let foundCategory = false;
            
            for (let i = 0; i < allRows.length; i++) {
                const row = allRows[i];
                if (row.getAttribute('data-category') === category) {
                    foundCategory = true;
                    continue;
                }
                if (foundCategory && row.querySelector('.btn-add')) {
                    addButtonRow = row;
                    break;
                }
            }
            
            if (addButtonRow) {
                tbody.insertBefore(newRow, addButtonRow);
            }
        }

        function removeInventoryRow(btn) {
            btn.closest('tr').remove();
            calculateInventory();
        }

        function calculateInventory() {
            const categories = ['food', 'clothing', 'electronics', 'home', 'other'];
            
            let totalQuantity = 0;
            let totalStockValue = 0;
            let totalProfit = 0;
            let totalItems = 0;
            let totalCost = 0;
            let totalRevenue = 0;
            let highestMargin = 0;
            
            categories.forEach(category => {
                let catQuantity = 0;
                let catStockValue = 0;
                let catProfit = 0;
                let catTotalCost = 0;
                let catTotalRevenue = 0;
                
                const rows = document.querySelectorAll(`tr[data-category="${category}"]`);
                rows.forEach(row => {
                    const quantity = parseFloat(row.querySelector('.inv-quantity').value) || 0;
                    const cost = parseFloat(row.querySelector('.inv-cost').value) || 0;
                    const price = parseFloat(row.querySelector('.inv-price').value) || 0;
                    
                    const stockValue = quantity * cost;
                    const profit = quantity * (price - cost);
                    const margin = cost > 0 ? ((price - cost) / cost) * 100 : 0;
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø­Ø³ÙˆØ¨Ø©
                    row.querySelector('.inv-stock-value').value = stockValue.toFixed(2);
                    row.querySelector('.inv-profit').value = profit.toFixed(2);
                    row.querySelector('.inv-margin').value = margin.toFixed(1) + '%';
                    
                    // ØªÙ„ÙˆÙŠÙ† Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­
                    const marginCell = row.querySelector('.inv-margin');
                    if (margin > 50) {
                        marginCell.style.color = 'var(--success-color)';
                    } else if (margin > 20) {
                        marginCell.style.color = 'var(--warning-color)';
                    } else {
                        marginCell.style.color = 'var(--danger-color)';
                    }
                    
                    catQuantity += quantity;
                    catStockValue += stockValue;
                    catProfit += profit;
                    catTotalCost += quantity * cost;
                    catTotalRevenue += quantity * price;
                    
                    if (quantity > 0) totalItems++;
                    if (margin > highestMargin) highestMargin = margin;
                });
                
                // Ø­Ø³Ø§Ø¨ Ù‡Ø§Ù…Ø´ Ø§Ù„ÙØ¦Ø©
                const catMargin = catTotalCost > 0 ? ((catTotalRevenue - catTotalCost) / catTotalCost) * 100 : 0;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø¹ÙŠØ©
                document.getElementById(`${category}-quantity`).textContent = catQuantity.toLocaleString();
                document.getElementById(`${category}-stock-value`).textContent = catStockValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById(`${category}-profit`).textContent = catProfit.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById(`${category}-margin`).textContent = catMargin.toFixed(1) + '%';
                
                totalQuantity += catQuantity;
                totalStockValue += catStockValue;
                totalProfit += catProfit;
                totalCost += catTotalCost;
                totalRevenue += catTotalRevenue;
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
            const totalMargin = totalCost > 0 ? ((totalRevenue - totalCost) / totalCost) * 100 : 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            document.getElementById('total-quantity').textContent = totalQuantity.toLocaleString();
            document.getElementById('total-stock-value').textContent = totalStockValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('total-profit').textContent = totalProfit.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('total-margin').textContent = totalMargin.toFixed(1) + '%';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            document.getElementById('total-inventory-value').textContent = totalStockValue.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
            document.getElementById('total-expected-profit').textContent = totalProfit.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
            document.getElementById('profit-margin').textContent = totalMargin.toFixed(1) + '%';
            document.getElementById('total-items-count').textContent = totalItems;
            
            // Ø­Ø³Ø§Ø¨ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
            const avgCost = totalItems > 0 ? totalCost / totalQuantity : 0;
            const avgPrice = totalItems > 0 ? totalRevenue / totalQuantity : 0;
            
            document.getElementById('avg-cost').textContent = avgCost.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('avg-price').textContent = avgPrice.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('highest-margin').textContent = highestMargin.toFixed(1) + '%';
            
            // ÙØ­Øµ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            checkInventoryAlerts();
        }

        function checkInventoryAlerts() {
            let lowStockItems = [];
            let highMarginItems = [];
            let lowMarginItems = [];
            
            document.querySelectorAll('#inventoryBody tr[data-category]').forEach(row => {
                const nameInput = row.querySelector('input[type="text"]');
                const quantity = parseFloat(row.querySelector('.inv-quantity').value) || 0;
                const marginText = row.querySelector('.inv-margin').value;
                const margin = parseFloat(marginText.replace('%', '')) || 0;
                
                if (!nameInput || !nameInput.value) return;
                
                const name = nameInput.value;
                
                // ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶
                if (quantity > 0 && quantity <= 5) {
                    lowStockItems.push({ name, quantity });
                }
                
                // Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ Ø¹Ø§Ù„ÙŠ
                if (quantity > 0 && margin >= 50) {
                    highMarginItems.push({ name, margin });
                }
                
                // Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ Ù…Ù†Ø®ÙØ¶
                if (quantity > 0 && margin > 0 && margin < 20) {
                    lowMarginItems.push({ name, margin });
                }
            });
            
            displayInventoryAlerts(lowStockItems, highMarginItems, lowMarginItems);
        }

        function displayInventoryAlerts(lowStock, highMargin, lowMargin) {
            const alertsDiv = document.getElementById('inventory-alerts');
            
            if (lowStock.length === 0 && highMargin.length === 0 && lowMargin.length === 0) {
                alertsDiv.innerHTML = '';
                return;
            }
            
            let html = '<div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; border: 1px solid var(--border-color);">';
            html += '<h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary); font-size: 1.3em;">ğŸ”” ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h3>';
            
            // Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶
            if (lowStock.length > 0) {
                html += '<div style="background: #fff3cd; border: 2px solid #ffc107; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">';
                html += '<strong style="color: #856404;">âš ï¸ ØªØ­Ø°ÙŠØ±: Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶</strong><ul style="margin: 10px 0 0 20px; color: #856404;">';
                lowStock.forEach(item => {
                    html += `<li>${item.name}: ${item.quantity} ÙˆØ­Ø¯Ø© ÙÙ‚Ø· - ÙŠØ­ØªØ§Ø¬ Ø¥Ø¹Ø§Ø¯Ø© Ø·Ù„Ø¨</li>`;
                });
                html += '</ul></div>';
            }
            
            // Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ Ø¹Ø§Ù„ÙŠ
            if (highMargin.length > 0) {
                html += '<div style="background: #d4edda; border: 2px solid #28a745; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">';
                html += '<strong style="color: #155724;">âœ¨ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø±Ø¨Ø­Ø© Ø¬Ø¯Ø§Ù‹</strong><ul style="margin: 10px 0 0 20px; color: #155724;">';
                highMargin.forEach(item => {
                    html += `<li>${item.name}: Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ ${item.margin.toFixed(1)}% - Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ø¨ÙŠØ¹Ù‡!</li>`;
                });
                html += '</ul></div>';
            }
            
            // Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ Ù…Ù†Ø®ÙØ¶
            if (lowMargin.length > 0) {
                html += '<div style="background: #f8d7da; border: 2px solid #dc3545; padding: var(--spacing-md); border-radius: 6px;">';
                html += '<strong style="color: #721c24;">ğŸ“‰ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ Ù…Ù†Ø®ÙØ¶</strong><ul style="margin: 10px 0 0 20px; color: #721c24;">';
                lowMargin.forEach(item => {
                    html += `<li>${item.name}: Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­ ${item.margin.toFixed(1)}% ÙÙ‚Ø· - Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø³Ø¹Ø±</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '</div>';
            alertsDiv.innerHTML = html;
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ====================

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© ====================

        function addCashflowRow(category) {
            const tbody = document.getElementById('cashflowBody');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-category', category);
            
            // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„ØªØ¯ÙÙ‚ ÙˆØ§Ù„Ù†Ø´Ø§Ø·
            const isInflow = category.includes('-in');
            const type = isInflow ? 'inflow' : 'outflow';
            
            let activity = 'operating';
            if (category.includes('investing')) activity = 'investing';
            else if (category.includes('financing')) activity = 'financing';
            
            newRow.innerHTML = `
                <td></td>
                <td><input type="text" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†"></td>
                <td><input type="number" class="cf-amount" data-type="${type}" data-activity="${activity}" value="0" onchange="calculateCashflow()"></td>
                <td><input type="text" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></td>
            `;
            
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let addButtonRow = null;
            let foundCategory = false;
            
            for (let i = 0; i < allRows.length; i++) {
                const row = allRows[i];
                if (row.getAttribute('data-category') === category) {
                    foundCategory = true;
                    continue;
                }
                if (foundCategory && row.querySelector('.btn-add')) {
                    addButtonRow = row;
                    break;
                }
            }
            
            if (addButtonRow) {
                tbody.insertBefore(newRow, addButtonRow);
            }
        }

        function removeCashflowRow(btn) {
            btn.closest('tr').remove();
            calculateCashflow();
        }

        function calculateCashflow() {
            let operatingInflows = 0;
            let operatingOutflows = 0;
            let investingInflows = 0;
            let investingOutflows = 0;
            let financingInflows = 0;
            let financingOutflows = 0;
            
            // Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª
            document.querySelectorAll('.cf-amount').forEach(input => {
                const amount = parseFloat(input.value) || 0;
                const type = input.getAttribute('data-type');
                const activity = input.getAttribute('data-activity');
                
                if (activity === 'operating') {
                    if (type === 'inflow') operatingInflows += amount;
                    else operatingOutflows += amount;
                } else if (activity === 'investing') {
                    if (type === 'inflow') investingInflows += amount;
                    else investingOutflows += amount;
                } else if (activity === 'financing') {
                    if (type === 'inflow') financingInflows += amount;
                    else financingOutflows += amount;
                }
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„ØµØ§ÙÙŠ Ù„ÙƒÙ„ Ù†Ø´Ø§Ø·
            const operatingNet = operatingInflows - operatingOutflows;
            const investingNet = investingInflows - investingOutflows;
            const financingNet = financingInflows - financingOutflows;
            
            // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            const totalInflows = operatingInflows + investingInflows + financingInflows;
            const totalOutflows = operatingOutflows + investingOutflows + financingOutflows;
            const netCashflow = totalInflows - totalOutflows;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„ÙØ±Ø¹ÙŠØ©
            document.getElementById('operating-net').textContent = operatingNet.toLocaleString();
            document.getElementById('investing-net').textContent = investingNet.toLocaleString();
            document.getElementById('financing-net').textContent = financingNet.toLocaleString();
            
            // ØªÙ„ÙˆÙŠÙ† Ø§Ù„ØµØ§ÙÙŠ
            const operatingEl = document.getElementById('operating-net');
            operatingEl.style.color = operatingNet >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            
            const investingEl = document.getElementById('investing-net');
            investingEl.style.color = investingNet >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            
            const financingEl = document.getElementById('financing-net');
            financingEl.style.color = financingNet >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            document.getElementById('total-inflows-table').textContent = totalInflows.toLocaleString();
            document.getElementById('total-outflows-table').textContent = totalOutflows.toLocaleString();
            document.getElementById('net-cashflow-table').textContent = netCashflow.toLocaleString();
            
            // ØªÙ„ÙˆÙŠÙ† ØµØ§ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚
            const netEl = document.getElementById('net-cashflow-table');
            netEl.style.color = netCashflow >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            document.getElementById('total-inflows').textContent = totalInflows.toLocaleString();
            document.getElementById('total-outflows').textContent = totalOutflows.toLocaleString();
            document.getElementById('net-cashflow').textContent = netCashflow.toLocaleString();
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨
            calculateCashflowRatios(operatingNet, totalInflows, totalOutflows, netCashflow);
        }

        function calculateCashflowRatios(operatingNet, totalInflows, totalOutflows, netCashflow) {
            // Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠ
            let operatingRatio = 0;
            if (netCashflow !== 0) {
                operatingRatio = (operatingNet / Math.abs(netCashflow)) * 100;
            }
            
            // Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒÙØ§ÙŠØ© Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©
            let cashSufficiency = 0;
            if (totalOutflows > 0) {
                cashSufficiency = (totalInflows / totalOutflows) * 100;
            }
            
            // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø±Ù‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ (Ø´Ù‡Ø±ÙŠØ§Ù‹)
            const burnRate = netCashflow < 0 ? Math.abs(netCashflow / 12) : 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            const operatingRatioEl = document.getElementById('operating-ratio');
            operatingRatioEl.textContent = operatingRatio.toFixed(1) + '%';
            operatingRatioEl.style.color = operatingRatio > 80 ? 'var(--success-color)' : 
                                            operatingRatio > 50 ? 'var(--warning-color)' : 
                                            'var(--danger-color)';
            
            const cashSufficiencyEl = document.getElementById('cash-sufficiency');
            cashSufficiencyEl.textContent = cashSufficiency.toFixed(1) + '%';
            cashSufficiencyEl.style.color = cashSufficiency >= 100 ? 'var(--success-color)' : 
                                             cashSufficiency >= 80 ? 'var(--warning-color)' : 
                                             'var(--danger-color)';
            
            const burnRateEl = document.getElementById('burn-rate');
            burnRateEl.textContent = burnRate.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
            burnRateEl.style.color = burnRate === 0 ? 'var(--success-color)' : 
                                      burnRate < totalInflows / 12 ? 'var(--warning-color)' : 
                                      'var(--danger-color)';
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© ====================

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø®Ø·Ø·Ø© vs Ø§Ù„ÙØ¹Ù„ÙŠØ© ====================

        function calculateBudget() {
            // Ø¬Ù…Ø¹ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ù…Ø®Ø·Ø·
            let plannedIncome = 0;
            document.querySelectorAll('.planned-income').forEach(input => {
                plannedIncome += parseFloat(input.value) || 0;
            });
            
            // Ø¬Ù…Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø®Ø·Ø·Ø©
            let plannedExpenses = 0;
            document.querySelectorAll('.planned-expense').forEach(input => {
                plannedExpenses += parseFloat(input.value) || 0;
            });
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ù† Ù‚Ø³Ù… Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ
            const actualIncome = parseFloat(document.getElementById('monthly-income')?.textContent.replace(/,/g, '')) || 0;
            const actualExpenses = parseFloat(document.getElementById('monthly-expenses')?.textContent.replace(/,/g, '')) || 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙØ¹Ù„ÙŠØ© (readonly)
            document.querySelectorAll('.actual-income').forEach((input, index) => {
                // ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ† Ù‡Ø°Ø§ Ù„Ø±Ø¨Ø· ÙƒÙ„ ØµÙ Ø¨ÙØ¦ØªÙ‡ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø©
                input.value = 0; // Ù…Ø¤Ù‚ØªØ§Ù‹
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¯Ø®Ù„
            const incomeRows = document.querySelectorAll('#budgetBody tr[data-category^="income-"]');
            incomeRows.forEach(row => {
                const planned = parseFloat(row.querySelector('.planned-income')?.value) || 0;
                const actual = parseFloat(row.querySelector('.actual-income')?.value) || 0;
                const difference = actual - planned;
                const achievement = planned > 0 ? (actual / planned) * 100 : 0;
                
                const diffCell = row.querySelector('.difference-cell');
                const achCell = row.querySelector('.achievement-cell');
                const statusCell = row.querySelector('.status-cell');
                
                if (diffCell) {
                    diffCell.textContent = difference.toLocaleString();
                    diffCell.style.color = difference >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
                }
                
                if (achCell) {
                    achCell.textContent = achievement.toFixed(1) + '%';
                    achCell.style.color = achievement >= 100 ? 'var(--success-color)' : 
                                          achievement >= 80 ? 'var(--warning-color)' : 
                                          'var(--danger-color)';
                }
                
                if (statusCell) {
                    if (achievement >= 100) statusCell.textContent = 'âœ…';
                    else if (achievement >= 80) statusCell.textContent = 'âš ï¸';
                    else statusCell.textContent = 'âŒ';
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
            const expenseRows = document.querySelectorAll('#budgetBody tr[data-category^="expense-"]');
            expenseRows.forEach(row => {
                const planned = parseFloat(row.querySelector('.planned-expense')?.value) || 0;
                const actual = parseFloat(row.querySelector('.actual-expense')?.value) || 0;
                const difference = planned - actual; // Ø¹ÙƒØ³ Ù„Ù„Ù…ØµØ§Ø±ÙŠÙ (Ø§Ù„Ø£Ù‚Ù„ Ø£ÙØ¶Ù„)
                const achievement = planned > 0 ? (actual / planned) * 100 : 0;
                
                const diffCell = row.querySelector('.difference-cell');
                const achCell = row.querySelector('.achievement-cell');
                const statusCell = row.querySelector('.status-cell');
                
                if (diffCell) {
                    diffCell.textContent = difference.toLocaleString();
                    diffCell.style.color = difference >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
                }
                
                if (achCell) {
                    achCell.textContent = achievement.toFixed(1) + '%';
                    achCell.style.color = achievement <= 100 ? 'var(--success-color)' : 
                                          achievement <= 120 ? 'var(--warning-color)' : 
                                          'var(--danger-color)';
                }
                
                if (statusCell) {
                    if (achievement <= 100) statusCell.textContent = 'âœ…';
                    else if (achievement <= 120) statusCell.textContent = 'âš ï¸';
                    else statusCell.textContent = 'âŒ';
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            document.getElementById('total-planned-income').textContent = plannedIncome.toLocaleString();
            document.getElementById('total-actual-income').textContent = actualIncome.toLocaleString();
            document.getElementById('total-income-difference').textContent = (actualIncome - plannedIncome).toLocaleString();
            
            const incomeAchievement = plannedIncome > 0 ? (actualIncome / plannedIncome) * 100 : 0;
            document.getElementById('total-income-achievement').textContent = incomeAchievement.toFixed(1) + '%';
            
            document.getElementById('total-planned-expenses').textContent = plannedExpenses.toLocaleString();
            document.getElementById('total-actual-expenses').textContent = actualExpenses.toLocaleString();
            document.getElementById('total-expenses-difference').textContent = (plannedExpenses - actualExpenses).toLocaleString();
            
            const expensesAchievement = plannedExpenses > 0 ? (actualExpenses / plannedExpenses) * 100 : 0;
            document.getElementById('total-expenses-achievement').textContent = expensesAchievement.toFixed(1) + '%';
            
            // ØµØ§ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©
            const netPlanned = plannedIncome - plannedExpenses;
            const netActual = actualIncome - actualExpenses;
            const netDifference = netActual - netPlanned;
            
            document.getElementById('net-planned-budget').textContent = netPlanned.toLocaleString();
            document.getElementById('net-actual-budget').textContent = netActual.toLocaleString();
            document.getElementById('net-budget-difference').textContent = netDifference.toLocaleString();
            
            const netAchievement = netPlanned !== 0 ? (netActual / netPlanned) * 100 : 0;
            document.getElementById('net-budget-achievement').textContent = netAchievement.toFixed(1) + '%';
            
            // ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            const netActualEl = document.getElementById('net-actual-budget');
            netActualEl.style.color = netActual >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            document.getElementById('planned-income-total').textContent = plannedIncome.toLocaleString();
            document.getElementById('actual-income-total').textContent = actualIncome.toLocaleString();
            document.getElementById('planned-expenses-total').textContent = plannedExpenses.toLocaleString();
            document.getElementById('actual-expenses-total').textContent = actualExpenses.toLocaleString();
            
            // Ø¹Ø±Ø¶ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ù†Ø­Ø±Ø§ÙØ§Øª
            displayVarianceAnalysis(plannedIncome, actualIncome, plannedExpenses, actualExpenses);
        }

        function displayVarianceAnalysis(plannedIncome, actualIncome, plannedExpenses, actualExpenses) {
            const alertsDiv = document.getElementById('variance-alerts');
            
            let html = '';
            const incomeVariance = actualIncome - plannedIncome;
            const expenseVariance = actualExpenses - plannedExpenses;
            
            // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø®Ù„
            if (Math.abs(incomeVariance) > plannedIncome * 0.1) { // Ø£ÙƒØ«Ø± Ù…Ù† 10%
                const type = incomeVariance > 0 ? 'positive' : 'negative';
                const color = incomeVariance > 0 ? '#d4edda' : '#f8d7da';
                const borderColor = incomeVariance > 0 ? '#28a745' : '#dc3545';
                const textColor = incomeVariance > 0 ? '#155724' : '#721c24';
                const icon = incomeVariance > 0 ? 'ğŸ“ˆ' : 'ğŸ“‰';
                
                html += `<div style="background: ${color}; border: 2px solid ${borderColor}; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">`;
                html += `<strong style="color: ${textColor};">${icon} Ø§Ù†Ø­Ø±Ø§Ù ÙƒØ¨ÙŠØ± ÙÙŠ Ø§Ù„Ø¯Ø®Ù„:</strong>`;
                html += `<p style="margin: 10px 0 0 0; color: ${textColor};">`;
                html += incomeVariance > 0 
                    ? `Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ù…Ù‚Ø¯Ø§Ø± ${Math.abs(incomeVariance).toLocaleString()} (${((incomeVariance/plannedIncome)*100).toFixed(1)}%). Ø§Ø³ØªØ«Ù…Ø± Ø§Ù„ÙØ§Ø¦Ø¶ Ø¨Ø­ÙƒÙ…Ø©!`
                    : `Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ù…Ù‚Ø¯Ø§Ø± ${Math.abs(incomeVariance).toLocaleString()} (${((Math.abs(incomeVariance)/plannedIncome)*100).toFixed(1)}%). Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ØµØ§Ø¯Ø± Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠØ©.`;
                html += `</p></div>`;
            }
            
            // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
            if (Math.abs(expenseVariance) > plannedExpenses * 0.1) { // Ø£ÙƒØ«Ø± Ù…Ù† 10%
                const type = expenseVariance < 0 ? 'positive' : 'negative';
                const color = expenseVariance < 0 ? '#d4edda' : '#f8d7da';
                const borderColor = expenseVariance < 0 ? '#28a745' : '#dc3545';
                const textColor = expenseVariance < 0 ? '#155724' : '#721c24';
                const icon = expenseVariance < 0 ? 'ğŸ’°' : 'âš ï¸';
                
                html += `<div style="background: ${color}; border: 2px solid ${borderColor}; padding: var(--spacing-md); border-radius: 6px; margin-bottom: var(--spacing-md);">`;
                html += `<strong style="color: ${textColor};">${icon} Ø§Ù†Ø­Ø±Ø§Ù ÙÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ:</strong>`;
                html += `<p style="margin: 10px 0 0 0; color: ${textColor};">`;
                html += expenseVariance < 0 
                    ? `Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ÙØ¹Ù„ÙŠØ© Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ù…Ù‚Ø¯Ø§Ø± ${Math.abs(expenseVariance).toLocaleString()} (${((Math.abs(expenseVariance)/plannedExpenses)*100).toFixed(1)}%). Ø£Ø­Ø³Ù†Øª! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ù…Ø§Ù„ÙŠ.`
                    : `Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ÙØ¹Ù„ÙŠØ© Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ù…Ù‚Ø¯Ø§Ø± ${Math.abs(expenseVariance).toLocaleString()} (${((expenseVariance/plannedExpenses)*100).toFixed(1)}%). Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆÙ‚Ù„Ù„ Ø§Ù„Ø¥Ù†ÙØ§Ù‚ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ.`;
                html += `</p></div>`;
            }
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙƒÙ„ Ø´ÙŠØ¡ Ø¶Ù…Ù† Ø§Ù„Ø®Ø·Ø©
            if (html === '') {
                html = `<div style="background: #d4edda; border: 2px solid #28a745; padding: var(--spacing-md); border-radius: 6px;">`;
                html += `<strong style="color: #155724;">âœ… Ø±Ø§Ø¦Ø¹! Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø¶Ù…Ù† Ø§Ù„Ø®Ø·Ø©</strong>`;
                html += `<p style="margin: 10px 0 0 0; color: #155724;">Ø§Ù„Ø§Ù†Ø­Ø±Ø§ÙØ§Øª Ø¶Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø© (Ø£Ù‚Ù„ Ù…Ù† 10%). Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù‡Ø¬!</p>`;
                html += `</div>`;
            }
            
            alertsDiv.innerHTML = html;
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø®Ø·Ø·Ø© ====================

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© ====================

        function calculateZakat() {
            // Ø¬Ù…Ø¹ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ø²ÙƒÙˆÙŠØ©
            const cash = parseFloat(document.getElementById('zakat-cash')?.value) || 0;
            const gold = parseFloat(document.getElementById('zakat-gold')?.value) || 0;
            const stocks = parseFloat(document.getElementById('zakat-stocks')?.value) || 0;
            const property = parseFloat(document.getElementById('zakat-property')?.value) || 0;
            const inventory = parseFloat(document.getElementById('zakat-inventory')?.value) || 0;
            const receivables = parseFloat(document.getElementById('zakat-receivables')?.value) || 0;
            
            // Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©
            const debts = parseFloat(document.getElementById('zakat-debts')?.value) || 0;
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ø²ÙƒÙˆÙŠØ©
            const totalZakawi = cash + gold + stocks + property + inventory + receivables;
            document.getElementById('zakat-total-zakawi').textContent = totalZakawi.toLocaleString();
            
            // Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø²ÙƒÙˆÙŠ (Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø¯ÙŠÙˆÙ†)
            const zakatBase = Math.max(0, totalZakawi - debts);
            document.getElementById('zakat-base').textContent = zakatBase.toLocaleString();
            
            // Ø§Ù„Ù†ØµØ§Ø¨
            const nisabValue = parseFloat(document.getElementById('nisab-value')?.value) || 0;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²ÙƒØ§Ø© (2.5%)
            let zakatDue = 0;
            if (zakatBase >= nisabValue && nisabValue > 0) {
                zakatDue = zakatBase * 0.025;
            }
            
            document.getElementById('zakat-due').textContent = zakatDue.toLocaleString();
            document.getElementById('zakat-amount').textContent = zakatDue.toLocaleString();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ
            updateTaxSummary();
        }

        function calculateTax() {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø³Ù†ÙˆÙŠ Ù…Ù† Ù‚Ø³Ù… Ø§Ù„Ø¯Ø®Ù„
            const yearlyIncome = parseFloat(document.getElementById('yearly-income')?.textContent.replace(/,/g, '')) || 0;
            document.getElementById('tax-income').value = yearlyIncome;
            
            // Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª
            const deductions = parseFloat(document.getElementById('tax-deductions')?.value) || 0;
            
            // Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø®Ø§Ø¶Ø¹ Ù„Ù„Ø¶Ø±ÙŠØ¨Ø©
            const taxableIncome = Math.max(0, yearlyIncome - deductions);
            document.getElementById('taxable-income').textContent = taxableIncome.toLocaleString();
            
            // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©
            const taxRate = parseFloat(document.getElementById('tax-rate')?.value) || 0;
            
            // Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©
            const taxDue = (taxableIncome * taxRate) / 100;
            document.getElementById('tax-due').textContent = taxDue.toLocaleString();
            document.getElementById('tax-amount').textContent = taxDue.toLocaleString();
            
            // ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©
            const zakatDue = parseFloat(document.getElementById('zakat-due')?.textContent.replace(/,/g, '')) || 0;
            const netAfterTax = yearlyIncome - zakatDue - taxDue;
            document.getElementById('net-after-tax').textContent = netAfterTax.toLocaleString();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ
            updateTaxSummary();
        }

        function calculateVAT(type) {
            if (type === 'add') {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©
                const priceBefore = parseFloat(document.getElementById('vat-price-before')?.value) || 0;
                const vatRate = parseFloat(document.getElementById('vat-rate-add')?.value) || 0;
                
                const vatAmount = (priceBefore * vatRate) / 100;
                const priceAfter = priceBefore + vatAmount;
                
                document.getElementById('vat-amount-add').textContent = vatAmount.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('vat-price-after').textContent = priceAfter.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                
            } else if (type === 'extract') {
                // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©
                const priceWith = parseFloat(document.getElementById('vat-price-with')?.value) || 0;
                const vatRate = parseFloat(document.getElementById('vat-rate-extract')?.value) || 0;
                
                const priceWithout = priceWith / (1 + (vatRate / 100));
                const vatAmount = priceWith - priceWithout;
                
                document.getElementById('vat-amount-extract').textContent = vatAmount.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('vat-price-without').textContent = priceWithout.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            }
        }

        function updateTaxSummary() {
            const zakatDue = parseFloat(document.getElementById('zakat-due')?.textContent.replace(/,/g, '')) || 0;
            const taxDue = parseFloat(document.getElementById('tax-due')?.textContent.replace(/,/g, '')) || 0;
            const yearlyIncome = parseFloat(document.getElementById('tax-income')?.value) || 0;
            
            const totalObligations = zakatDue + taxDue;
            const obligationsRatio = yearlyIncome > 0 ? (totalObligations / yearlyIncome) * 100 : 0;
            
            document.getElementById('summary-zakat').textContent = zakatDue.toLocaleString();
            document.getElementById('summary-income-tax').textContent = taxDue.toLocaleString();
            document.getElementById('summary-total-obligations').textContent = totalObligations.toLocaleString();
            document.getElementById('summary-obligations-ratio').textContent = obligationsRatio.toFixed(1) + '%';
            
            // ØªØ­Ø¯ÙŠØ« Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
            document.getElementById('tax-total-income').textContent = yearlyIncome.toLocaleString();
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© ====================

        // ==================== Ø¯ÙˆØ§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Dashboard ====================

        let dashboardCharts = {
            incomeExpenses: null,
            expensesDistribution: null,
            incomeSources: null,
            assetsLiabilities: null
        };

        function updateDashboard() {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰
            const monthlyIncome = parseFloat(document.getElementById('monthly-income')?.textContent.replace(/,/g, '')) || 0;
            const yearlyIncome = parseFloat(document.getElementById('yearly-income')?.textContent.replace(/,/g, '')) || 0;
            const monthlyExpenses = parseFloat(document.getElementById('monthly-expenses')?.textContent.replace(/,/g, '')) || 0;
            const yearlyExpenses = parseFloat(document.getElementById('yearly-expenses')?.textContent.replace(/,/g, '')) || 0;
            const netSurplus = monthlyIncome - monthlyExpenses;
            const netWorth = parseFloat(document.getElementById('net-worth')?.textContent.replace(/,/g, '')) || 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            document.getElementById('dash-income').textContent = monthlyIncome.toLocaleString();
            document.getElementById('dash-income-yearly').textContent = yearlyIncome.toLocaleString();
            document.getElementById('dash-expenses').textContent = monthlyExpenses.toLocaleString();
            document.getElementById('dash-expenses-yearly').textContent = yearlyExpenses.toLocaleString();
            document.getElementById('dash-surplus').textContent = netSurplus.toLocaleString();
            document.getElementById('dash-networth').textContent = netWorth.toLocaleString();
            
            const surplusRatio = monthlyIncome > 0 ? (netSurplus / monthlyIncome) * 100 : 0;
            document.getElementById('dash-surplus-ratio').textContent = surplusRatio.toFixed(1) + '%';
            
            // ØªÙ„ÙˆÙŠÙ† Ø§Ù„ÙØ§Ø¦Ø¶
            const surplusEl = document.getElementById('dash-surplus');
            if (surplusEl) {
                surplusEl.parentElement.style.background = netSurplus >= 0 
                    ? 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'
                    : 'linear-gradient(135deg, #ee0979 0%, #ff6a00 100%)';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
            updateIncomeExpensesChart(monthlyIncome, monthlyExpenses);
            updateExpensesDistributionChart();
            updateIncomeSourcesChart();
            updateAssetsLiabilitiesChart();
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
            updateKPIs(monthlyIncome, monthlyExpenses, netSurplus);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
            updateDashboardSummary(monthlyIncome, monthlyExpenses, netSurplus, netWorth);
            updateDashboardAlerts(monthlyIncome, monthlyExpenses, netSurplus);
        }

        function updateIncomeExpensesChart(income, expenses) {
            const ctx = document.getElementById('incomeExpensesChart');
            if (!ctx) return;
            
            if (dashboardCharts.incomeExpenses) {
                dashboardCharts.incomeExpenses.destroy();
            }
            
            dashboardCharts.incomeExpenses = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Ø§Ù„Ø¯Ø®Ù„', 'Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ', 'Ø§Ù„ÙØ§Ø¦Ø¶'],
                    datasets: [{
                        label: 'Ø§Ù„Ù…Ø¨Ù„Øº',
                        data: [income, expenses, income - expenses],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(240, 147, 251, 0.8)',
                            income - expenses >= 0 ? 'rgba(17, 153, 142, 0.8)' : 'rgba(238, 9, 121, 0.8)'
                        ],
                        borderColor: [
                            'rgba(102, 126, 234, 1)',
                            'rgba(240, 147, 251, 1)',
                            income - expenses >= 0 ? 'rgba(17, 153, 142, 1)' : 'rgba(238, 9, 121, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            rtl: true,
                            textDirection: 'rtl'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateExpensesDistributionChart() {
            const ctx = document.getElementById('expensesDistributionChart');
            if (!ctx) return;
            
            const categories = ['transport', 'housing', 'groceries', 'maintenance', 'entertainment', 
                              'health', 'education', 'charity', 'debts', 'savings'];
            const labels = ['Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª', 'Ø§Ù„Ø³ÙƒÙ†', 'Ø§Ù„Ù…Ù‚Ø§Ø¶ÙŠ', 'Ø§Ù„ØµÙŠØ§Ù†Ø©', 'Ø§Ù„ØªØ±ÙÙŠÙ‡', 
                           'Ø§Ù„ØµØ­Ø©', 'Ø§Ù„ØªØ¹Ù„ÙŠÙ…', 'Ø§Ù„ØµØ¯Ù‚Ø§Øª', 'Ø§Ù„Ø¯ÙŠÙˆÙ†', 'Ø§Ù„Ø§Ø¯Ø®Ø§Ø±'];
            const data = [];
            const colors = [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)',
                'rgba(199, 199, 199, 0.8)',
                'rgba(83, 102, 255, 0.8)',
                'rgba(255, 99, 255, 0.8)',
                'rgba(50, 205, 50, 0.8)'
            ];
            
            categories.forEach(cat => {
                const total = parseFloat(document.getElementById(`${cat}-total`)?.textContent.replace(/,/g, '')) || 0;
                data.push(total);
            });
            
            if (dashboardCharts.expensesDistribution) {
                dashboardCharts.expensesDistribution.destroy();
            }
            
            dashboardCharts.expensesDistribution = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            textDirection: 'rtl'
                        },
                        tooltip: {
                            rtl: true,
                            textDirection: 'rtl',
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateIncomeSourcesChart() {
            const ctx = document.getElementById('incomeSourcesChart');
            if (!ctx) return;
            
            const categories = ['salaries', 'allowances', 'investments', 'others'];
            const labels = ['Ø§Ù„Ø±ÙˆØ§ØªØ¨', 'Ø§Ù„Ø¥Ø¹Ø§Ù†Ø§Øª', 'Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª', 'Ø£Ø®Ø±Ù‰'];
            const data = [];
            const colors = [
                'rgba(102, 126, 234, 0.8)',
                'rgba(79, 172, 254, 0.8)',
                'rgba(17, 153, 142, 0.8)',
                'rgba(245, 87, 108, 0.8)'
            ];
            
            categories.forEach(cat => {
                const total = parseFloat(document.getElementById(`${cat}-total`)?.textContent.replace(/,/g, '')) || 0;
                data.push(total);
            });
            
            if (dashboardCharts.incomeSources) {
                dashboardCharts.incomeSources.destroy();
            }
            
            dashboardCharts.incomeSources = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            textDirection: 'rtl'
                        },
                        tooltip: {
                            rtl: true,
                            textDirection: 'rtl',
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateAssetsLiabilitiesChart() {
            const ctx = document.getElementById('assetsLiabilitiesChart');
            if (!ctx) return;
            
            const totalAssets = parseFloat(document.getElementById('total-assets')?.textContent.replace(/,/g, '')) || 0;
            const totalLiabilities = parseFloat(document.getElementById('total-liabilities')?.textContent.replace(/,/g, '')) || 0;
            const netWorth = totalAssets - totalLiabilities;
            
            if (dashboardCharts.assetsLiabilities) {
                dashboardCharts.assetsLiabilities.destroy();
            }
            
            dashboardCharts.assetsLiabilities = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Ø§Ù„Ø£ØµÙˆÙ„', 'Ø§Ù„Ø®ØµÙˆÙ…', 'ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©'],
                    datasets: [{
                        label: 'Ø§Ù„Ù…Ø¨Ù„Øº',
                        data: [totalAssets, totalLiabilities, netWorth],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(240, 147, 251, 0.8)',
                            netWorth >= 0 ? 'rgba(17, 153, 142, 0.8)' : 'rgba(238, 9, 121, 0.8)'
                        ],
                        borderColor: [
                            'rgba(102, 126, 234, 1)',
                            'rgba(240, 147, 251, 1)',
                            netWorth >= 0 ? 'rgba(17, 153, 142, 1)' : 'rgba(238, 9, 121, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            rtl: true,
                            textDirection: 'rtl'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateKPIs(income, expenses, surplus) {
            // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø¯Ø®Ø§Ø±
            const savingsRate = income > 0 ? (surplus / income) * 100 : 0;
            document.getElementById('kpi-savings-rate').textContent = savingsRate.toFixed(1) + '%';
            
            // Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© (Ø§Ù„Ø³ÙƒÙ† + Ø§Ù„Ø¯ÙŠÙˆÙ†)
            const housing = parseFloat(document.getElementById('housing-total')?.textContent.replace(/,/g, '')) || 0;
            const debts = parseFloat(document.getElementById('debts-total')?.textContent.replace(/,/g, '')) || 0;
            const fixedExpenses = housing + debts;
            const fixedRatio = income > 0 ? (fixedExpenses / income) * 100 : 0;
            document.getElementById('kpi-fixed-expenses').textContent = fixedRatio.toFixed(1) + '%';
            
            // Ù†Ø³Ø¨Ø© Ø§Ù„Ø³ÙŠÙˆÙ„Ø©
            const currentAssets = parseFloat(document.getElementById('current-assets-total')?.textContent.replace(/,/g, '')) || 0;
            const totalAssets = parseFloat(document.getElementById('total-assets')?.textContent.replace(/,/g, '')) || 0;
            const liquidityRatio = totalAssets > 0 ? (currentAssets / totalAssets) * 100 : 0;
            document.getElementById('kpi-liquidity-ratio').textContent = liquidityRatio.toFixed(1) + '%';
            
            // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§ÙƒØªÙØ§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ (ÙƒÙ… Ø´Ù‡Ø± ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¹ÙŠØ´ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª)
            const savings = parseFloat(document.getElementById('savings-total')?.textContent.replace(/,/g, '')) || 0;
            const financialIndependence = expenses > 0 ? currentAssets / expenses : 0;
            document.getElementById('kpi-financial-independence').textContent = financialIndependence.toFixed(1);
        }

        function updateDashboardSummary(income, expenses, surplus, netWorth) {
            const summaryDiv = document.getElementById('dashboard-summary');
            if (!summaryDiv) return;
            
            let html = '<ul style="list-style: none; padding: 0; margin: 0;">';
            
            html += `<li style="padding: 8px 0; border-bottom: 1px solid var(--border-color);">
                <strong>ğŸ’° Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ:</strong> ${income.toLocaleString()} 
                <span style="color: var(--text-secondary); font-size: 0.9em;">(Ø³Ù†ÙˆÙŠØ§Ù‹: ${(income * 12).toLocaleString()})</span>
            </li>`;
            
            html += `<li style="padding: 8px 0; border-bottom: 1px solid var(--border-color);">
                <strong>ğŸ’³ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:</strong> ${expenses.toLocaleString()} 
                <span style="color: var(--text-secondary); font-size: 0.9em;">(${income > 0 ? ((expenses/income)*100).toFixed(1) : 0}% Ù…Ù† Ø§Ù„Ø¯Ø®Ù„)</span>
            </li>`;
            
            const surplusColor = surplus >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            html += `<li style="padding: 8px 0; border-bottom: 1px solid var(--border-color);">
                <strong>ğŸ’ Ø§Ù„ÙØ§Ø¦Ø¶:</strong> <span style="color: ${surplusColor};">${surplus.toLocaleString()}</span>
                <span style="color: var(--text-secondary); font-size: 0.9em;">(${income > 0 ? ((surplus/income)*100).toFixed(1) : 0}% Ù…Ù† Ø§Ù„Ø¯Ø®Ù„)</span>
            </li>`;
            
            const netWorthColor = netWorth >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
            html += `<li style="padding: 8px 0;">
                <strong>ğŸ¦ ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©:</strong> <span style="color: ${netWorthColor};">${netWorth.toLocaleString()}</span>
            </li>`;
            
            html += '</ul>';
            summaryDiv.innerHTML = html;
        }

        function updateDashboardAlerts(income, expenses, surplus) {
            const alertsDiv = document.getElementById('dashboard-alerts');
            if (!alertsDiv) return;
            
            let html = '';
            
            // ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¹Ø¬Ø²
            if (surplus < 0) {
                html += `<div style="background: #f8d7da; border: 2px solid #dc3545; padding: var(--spacing-md); border-radius: 8px; margin-bottom: var(--spacing-md);">
                    <strong style="color: #721c24;">âš ï¸ ØªØ­Ø°ÙŠØ±: Ø¹Ø¬Ø² ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©!</strong>
                    <p style="margin: 10px 0 0 0; color: #721c24;">
                        Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ØªØªØ¬Ø§ÙˆØ² Ø§Ù„Ø¯Ø®Ù„ Ø¨Ù…Ù‚Ø¯Ø§Ø± ${Math.abs(surplus).toLocaleString()}. ÙŠØ¬Ø¨ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø£Ùˆ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¯Ø®Ù„ ÙÙˆØ±Ø§Ù‹.
                    </p>
                </div>`;
            }
            
            // ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
            const fixedExpenses = (parseFloat(document.getElementById('housing-total')?.textContent.replace(/,/g, '')) || 0) +
                                 (parseFloat(document.getElementById('debts-total')?.textContent.replace(/,/g, '')) || 0);
            const fixedRatio = income > 0 ? (fixedExpenses / income) * 100 : 0;
            
            if (fixedRatio > 50) {
                html += `<div style="background: #fff3cd; border: 2px solid #ffc107; padding: var(--spacing-md); border-radius: 8px; margin-bottom: var(--spacing-md);">
                    <strong style="color: #856404;">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© Ø¹Ø§Ù„ÙŠØ©</strong>
                    <p style="margin: 10px 0 0 0; color: #856404;">
                        Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© (Ø³ÙƒÙ† + Ø¯ÙŠÙˆÙ†) ØªØ´ÙƒÙ„ ${fixedRatio.toFixed(1)}% Ù…Ù† Ø¯Ø®Ù„Ùƒ. Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ø£Ù† ØªÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 50%.
                    </p>
                </div>`;
            }
            
            // ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù†Ø¹Ø¯Ø§Ù… Ø§Ù„Ø§Ø¯Ø®Ø§Ø±
            const savings = parseFloat(document.getElementById('savings-total')?.textContent.replace(/,/g, '')) || 0;
            if (savings === 0 && surplus > 0) {
                html += `<div style="background: #d1ecf1; border: 2px solid #17a2b8; padding: var(--spacing-md); border-radius: 8px; margin-bottom: var(--spacing-md);">
                    <strong style="color: #0c5460;">ğŸ’¡ ØªÙˆØµÙŠØ©: Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ø§Ø¯Ø®Ø§Ø±</strong>
                    <p style="margin: 10px 0 0 0; color: #0c5460;">
                        Ù„Ø¯ÙŠÙƒ ÙØ§Ø¦Ø¶ ${surplus.toLocaleString()} ÙˆÙ„ÙƒÙ† Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø¯Ø®Ø§Ø±. Ø®ØµØµ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 10-20% Ù…Ù† Ø¯Ø®Ù„Ùƒ Ù„Ù„Ø§Ø¯Ø®Ø§Ø±.
                    </p>
                </div>`;
            }
            
            // Ø±Ø³Ø§Ù„Ø© Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©
            if (surplus >= income * 0.2 && html === '') {
                html = `<div style="background: #d4edda; border: 2px solid #28a745; padding: var(--spacing-md); border-radius: 8px;">
                    <strong style="color: #155724;">âœ… Ù…Ù…ØªØ§Ø²! ÙˆØ¶Ø¹Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠ ØµØ­ÙŠ</strong>
                    <p style="margin: 10px 0 0 0; color: #155724;">
                        Ù„Ø¯ÙŠÙƒ ÙØ§Ø¦Ø¶ Ø¬ÙŠØ¯ (${((surplus/income)*100).toFixed(1)}% Ù…Ù† Ø¯Ø®Ù„Ùƒ). Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù‡Ø¬ ÙˆÙÙƒØ± ÙÙŠ Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„ÙØ§Ø¦Ø¶.
                    </p>
                </div>`;
            }
            
            alertsDiv.innerHTML = html;
        }

        // ==================== Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ====================

        function calculateIncome() {
            const categories = ['salaries', 'allowances', 'investments', 'others'];
            let totalMonthly = 0;

            categories.forEach(category => {
                const inputs = document.querySelectorAll(`.income-amount[data-category="${category}"]`);
                let categoryTotal = 0;
                
                inputs.forEach(input => {
                    categoryTotal += parseFloat(input.value) || 0;
                });
                
                document.getElementById(`${category}-total`).textContent = categoryTotal.toLocaleString();
                totalMonthly += categoryTotal;
            });

            document.getElementById('monthly-income').textContent = totalMonthly.toLocaleString();
            document.getElementById('yearly-income').textContent = (totalMonthly * 12).toLocaleString();
            
            calculateNetSurplus();
            updateDashboard(); // ØªØ­Ø¯ÙŠØ« Dashboard
        }

        function calculateExpenses() {
            const categories = ['transport', 'housing', 'groceries', 'maintenance', 'entertainment', 
                              'health', 'education', 'charity', 'debts', 'savings'];
            let totalMonthly = 0;

            categories.forEach(category => {
                const inputs = document.querySelectorAll(`.expense-amount[data-category="${category}"]`);
                let categoryTotal = 0;
                
                inputs.forEach(input => {
                    categoryTotal += parseFloat(input.value) || 0;
                });
                
                document.getElementById(`${category}-total`).textContent = categoryTotal.toLocaleString();
                totalMonthly += categoryTotal;
            });

            document.getElementById('monthly-expenses').textContent = totalMonthly.toLocaleString();
            document.getElementById('yearly-expenses').textContent = (totalMonthly * 12).toLocaleString();
            
            calculateNetSurplus();
            updateDashboard(); // ØªØ­Ø¯ÙŠØ« Dashboard
        }

        function calculateNetSurplus() {
            const yearlyIncome = parseFloat(document.getElementById('yearly-income').textContent.replace(/,/g, '')) || 0;
            const yearlyExpenses = parseFloat(document.getElementById('yearly-expenses').textContent.replace(/,/g, '')) || 0;
            const netSurplus = yearlyIncome - yearlyExpenses;
            
            document.getElementById('total-expenses-display').textContent = yearlyExpenses.toLocaleString();
            document.getElementById('net-surplus').textContent = netSurplus.toLocaleString();
            
            const surplusCell = document.getElementById('net-surplus').parentElement;
            surplusCell.style.color = netSurplus > 0 ? '#28a745' : netSurplus < 0 ? '#dc3545' : '#6c757d';
        }

        function updateAnalysis() {
            const yearlyIncome = parseFloat(document.getElementById('yearly-income').textContent.replace(/,/g, '')) || 0;
            const yearlyExpenses = parseFloat(document.getElementById('yearly-expenses').textContent.replace(/,/g, '')) || 0;
            
            if (yearlyIncome === 0 && yearlyExpenses === 0) {
                document.getElementById('status-text').textContent = 'Ù‚Ù… Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ù„ÙŠÙ„';
                document.getElementById('status-score').textContent = '';
                document.getElementById('status-display').className = 'status-indicator';
                return;
            }
            
            const netSurplus = yearlyIncome - yearlyExpenses;
            const percentage = (netSurplus / yearlyIncome) * 100;
            
            const score = Math.round(percentage / 20);
            const clampedScore = Math.max(-5, Math.min(5, score));
            
            const statusMap = {
                5: { text: 'Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹', class: 'status-excellent', advice: 'Ø§Ø³ØªÙ…Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù†Ù‡Ø¬ ÙˆØ²Ø¯ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª' },
                4: { text: 'Ù…Ù…ØªØ§Ø²', class: 'status-excellent', advice: 'ÙˆØ¶Ø¹ Ù…Ù…ØªØ§Ø²ØŒ ÙÙƒØ± ÙÙŠ ÙØ±Øµ Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©' },
                3: { text: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹', class: 'status-good', advice: 'Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙˆØ±Ø§Ø¬Ø¹ Ø®Ø·Ø© Ø§Ù„Ø§Ø¯Ø®Ø§Ø±' },
                2: { text: 'Ø¬ÙŠØ¯', class: 'status-good', advice: 'Ø­Ø§ÙˆÙ„ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙØ§Ø¦Ø¶ Ù…Ù† Ø®Ù„Ø§Ù„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©' },
                1: { text: 'Ù…Ù†Ø§Ø³Ø¨', class: 'status-good', advice: 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø±Ù‚ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¯Ø®Ù„ Ø£Ùˆ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ' },
                0: { text: 'Ù…ØªÙˆØ§Ø²Ù†', class: 'status-balanced', advice: 'Ø§Ù„ÙˆØ¶Ø¹ Ù…ØªÙˆØ§Ø²Ù†ØŒ Ù„ÙƒÙ† ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¨Ù†Ø§Ø¡ Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ø·ÙˆØ§Ø±Ø¦' },
                '-1': { text: 'ØªØ±Ø§Ø¬Ø¹', class: 'status-bad', advice: 'Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆØ§Ø¨Ø­Ø« Ø¹Ù† Ù…ØµØ§Ø¯Ø± Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠØ©' },
                '-2': { text: 'ØºÙŠØ± Ø¬ÙŠØ¯', class: 'status-bad', advice: 'Ù‚Ù„Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© ÙÙˆØ±Ø§Ù‹' },
                '-3': { text: 'Ø³ÙŠØ¦', class: 'status-bad', advice: 'Ø£Ø¹Ø¯ Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙˆÙ‚Ù„Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ±' },
                '-4': { text: 'Ø³ÙŠØ¦ Ø¬Ø¯Ø§Ù‹', class: 'status-critical', advice: 'ØªØ¯Ø®Ù„ Ø¹Ø§Ø¬Ù„ Ù…Ø·Ù„ÙˆØ¨ - Ø±Ø§Ø¬Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª ÙˆØ§Ù„Ø¯ÙŠÙˆÙ†' },
                '-5': { text: 'ÙŠØ­ØªØ§Ø¬ ØªØ¯Ø®Ù„ Ø¹Ø§Ø¬Ù„', class: 'status-critical', advice: 'Ø§Ø³ØªØ´Ø± Ù…Ø³ØªØ´Ø§Ø± Ù…Ø§Ù„ÙŠ ÙÙˆØ±Ø§Ù‹ ÙˆØ£Ø¹Ø¯ Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†' }
            };
            
            const status = statusMap[clampedScore];
            document.getElementById('status-text').innerHTML = `
                <div style="font-size: 1.2em; margin-bottom: 10px;">Ù…ÙˆÙ‚Ù Ø§Ù„Ø£Ø³Ø±Ø©: ${status.text}</div>
                <div style="font-size: 0.9em; opacity: 0.95; line-height: 1.6;">
                    <strong>Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‚ØªØ±Ø­:</strong> ${status.advice}
                </div>
            `;
            document.getElementById('status-score').textContent = `Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${clampedScore > 0 ? '+' : ''}${clampedScore}`;
            document.getElementById('status-display').className = `status-indicator ${status.class}`;
        }

        /**
         * Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø§Ø· Screenshot Ù…ØªÙ‚Ø¯Ù…Ø©
         * - ØªÙ„ØªÙ‚Ø· ÙƒØ§Ù…Ù„ Ø§Ù„Ù‚Ø³Ù… (Ø§Ù„Ø¯Ø®Ù„ / Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ / Ø§Ù„ØªØ­Ù„ÙŠÙ„)
         * - ØªÙ„ØªÙ‚Ø· ÙƒÙ„ Ø§Ù„ØµÙÙˆÙ Ø­ØªÙ‰ Ù„Ùˆ 10 Ø´Ø§Ø´Ø§Øª
         * - Ø§Ù„Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© (scale: 2)
         * - ÙŠØ­ÙØ¸ Ù…Ø¨Ø§Ø´Ø±Ø© ÙƒØµÙˆØ±Ø© PNG
         * - ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰: Telegram Android, Telegram iOS, Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
         */
        function exportToPDF(section) {
            const element = document.getElementById(section);
            if (!element) {
                console.error('Ø§Ù„Ù‚Ø³Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯:', section);
                return;
            }

            // Ø¥Ø¬Ø¨Ø§Ø± ÙØªØ­ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            switchTab(section);
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.add('active');

            // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ø³Ù… Ø§Ù„Ø¹Ù†Ø§ØµØ±
            setTimeout(() => {
                // Ø­ÙØ¸ Ù…ÙˆØ¶Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
                const scrollX = window.scrollX;
                const scrollY = window.scrollY;

                // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
                html2canvas(element, {
                    scale: 2,                                    // Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©
                    useCORS: true,                               // Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù…Ù† Ù…ØµØ§Ø¯Ø± Ø®Ø§Ø±Ø¬ÙŠØ©
                    allowTaint: true,                            // Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¹Ù†Ø§ØµØ± Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ø®ØªÙ„ÙØ©
                    logging: false,                              // Ø¥ÙŠÙ‚Ø§Ù Ø³Ø¬Ù„Ø§Øª console
                    backgroundColor: window.getComputedStyle(element).backgroundColor,
                    windowWidth: element.scrollWidth,            // Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„
                    windowHeight: element.scrollHeight,          // Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ÙƒØ§Ù…Ù„ (ÙƒÙ„ Ø§Ù„ØµÙÙˆÙ)
                    scrollX: 0,                                  // Ø§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø£ÙˆÙ„ Ø§Ù„Ø¹Ù†ØµØ±
                    scrollY: 0,                                  // Ø§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø£ÙˆÙ„ Ø§Ù„Ø¹Ù†ØµØ±
                    width: element.scrollWidth,                  // Ø¹Ø±Ø¶ Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·
                    height: element.scrollHeight,                // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø· (ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰)
                    x: 0,
                    y: 0,
                    foreignObjectRendering: false                // Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØ§ÙÙ‚
                }).then(canvas => {
                    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù…ÙˆØ¶Ø¹Ù‡ Ø§Ù„Ø£ØµÙ„ÙŠ
                    window.scrollTo(scrollX, scrollY);

                    try {
                        // ØªØ­ÙˆÙŠÙ„ Canvas Ø¥Ù„Ù‰ Blob Ø«Ù… ØªØ­Ù…ÙŠÙ„Ù‡
                        canvas.toBlob((blob) => {
                            if (!blob) {
                                console.error('ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Blob');
                                loadingOverlay.classList.remove('active');
                                showErrorMessage();
                                return;
                            }

                            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ù…Ø¹ Ø§Ù„ØªØ§Ø±ÙŠØ®
                            const sectionNames = {
                                'income': 'ØªØ­Ù„ÙŠÙ„_Ø§Ù„Ø¯Ø®Ù„',
                                'expenses': 'ØªØ­Ù„ÙŠÙ„_Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ',
                                'analysis': 'ØªØ­Ù„ÙŠÙ„_Ù…ÙˆÙ‚Ù_Ø§Ù„Ø£Ø³Ø±Ø©'
                            };
                            const today = new Date().toISOString().slice(0, 10);
                            const fileName = `ÙˆØ²Ù†Ø©_Ù…ØµØ§Ø±ÙŠÙ_${sectionNames[section]}_${today}.png`;

                            // Ø¥Ù†Ø´Ø§Ø¡ URL Ù„Ù„Ù€ Blob
                            const url = URL.createObjectURL(blob);
                            
                            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„
                            const link = document.createElement('a');
                            link.style.display = 'none';
                            link.href = url;
                            link.download = fileName;
                            
                            // Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØµÙØ­Ø©
                            document.body.appendChild(link);
                            
                            // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                            link.click();
                            
                            // ØªÙ†Ø¸ÙŠÙ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                            setTimeout(() => {
                                document.body.removeChild(link);
                                URL.revokeObjectURL(url);
                            }, 100);
                            
                            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                            loadingOverlay.classList.remove('active');
                            
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                            showSuccessMessage();
                            
                        }, 'image/png', 1.0);
                        
                    } catch (error) {
                        console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©:', error);
                        loadingOverlay.classList.remove('active');
                        showErrorMessage();
                    }
                }).catch(error => {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©:', error);
                    loadingOverlay.classList.remove('active');
                    showErrorMessage();
                });
            }, 400); // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 400ms Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ø³Ù… Ø§Ù„Ø¹Ù†Ø§ØµØ±
        }

        /**
         * Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©)
         */
        function fallbackDownload(imageData, fileName) {
            // Ø·Ø±ÙŠÙ‚Ø© Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const link = document.createElement('a');
            link.style.display = 'none';
            link.download = fileName;
            link.href = imageData;
            link.target = '_blank';
            
            // Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØµÙØ­Ø©
            document.body.appendChild(link);
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø·Ø±Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹Ù…Ù„
            try {
                // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Click Ù…Ø¨Ø§Ø´Ø±
                link.click();
            } catch (e) {
                // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Ø§Ø³ØªØ®Ø¯Ø§Ù… MouseEvent
                const evt = new MouseEvent('click', {
                    view: window,
                    bubbles: true,
                    cancelable: true
                });
                link.dispatchEvent(evt);
            }
            
            // Ø­Ø°Ù Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ±
            setTimeout(() => {
                document.body.removeChild(link);
                // ØªØ­Ø±ÙŠØ± Ø§Ù„Ø°Ø§ÙƒØ±Ø©
                URL.revokeObjectURL(link.href);
            }, 100);
            
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.remove('active');
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
            showSuccessMessage();
        }

        /**
         * Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
         */
        function showSuccessMessage() {
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.showAlert) {
                window.Telegram.WebApp.showAlert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø¥ÙŠØ¬Ø§Ø¯Ù‡Ø§ ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙ†Ø²ÙŠÙ„Ø§Øª.');
            } else {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø¥ÙŠØ¬Ø§Ø¯Ù‡Ø§ ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙ†Ø²ÙŠÙ„Ø§Øª.');
            }
        }

        /**
         * Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
         */
        function showErrorMessage() {
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.showAlert) {
                window.Telegram.WebApp.showAlert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©.\n\nØ§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            } else {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©.\n\nØ§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø£ÙˆÙ„Ø§Ù‹
            if (!checkWorkingHours()) {
                return; // Ù„Ø§ ØªÙƒÙ…Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø®Ø§Ø±Ø¬ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„
            }
            
            loadTheme();
            calculateIncome();
            calculateExpenses();
            calculateBudget();
            calculateZakat();
            calculateTax();
            updateDashboard(); // ØªØ­Ø¯ÙŠØ« Dashboard Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            wrapTablesForMobile();
            initTelegramWebApp();
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø³Ø±ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
            setupAdminKeyboardShortcut();  // Ø§Ø®ØªØµØ§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­: Ctrl+Shift+A
            setupAdminClickTrigger();      // Ø§Ù„Ù†Ù‚Ø± 5 Ù…Ø±Ø§Øª ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ©
            checkAdminURL();               // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ø§Ø¨Ø· ?admin=true
            
            // Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            showRemainingTime();
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠØ© Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„
            startWorkHoursMonitoring();
        });

        // ØªÙ‡ÙŠØ¦Ø© Telegram Web App
        function initTelegramWebApp() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                tg.expand();
                tg.enableClosingConfirmation();
                tg.ready();
                
                if (tg.themeParams.bg_color) {
                    document.documentElement.style.setProperty('--tg-bg-color', tg.themeParams.bg_color);
                }
                
                console.log('âœ… Telegram Web App ØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­');
            }
        }

        // ØªØºÙ„ÙŠÙ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ
        function wrapTablesForMobile() {
            const tables = document.querySelectorAll('table');
            tables.forEach(table => {
                if (!table.parentElement.classList.contains('table-wrapper')) {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'table-wrapper';
                    table.parentNode.insertBefore(wrapper, table);
                    wrapper.appendChild(table);
                }
            });
        }
    </script>
</body>
</html>
